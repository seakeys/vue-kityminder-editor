{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./examples/App.vue?1d78","webpack:///./packages/kityMinder/assets/kityminder.editor.js","webpack:///./examples/App.vue?1001","webpack:///examples/App.vue","webpack:///./examples/App.vue?ff18","webpack:///./examples/App.vue?4fb9","webpack:///./packages/kityMinder/src/minder.vue?cda9","webpack:///packages/kityMinder/src/minder.vue","webpack:///./packages/kityMinder/src/minder.vue?a96c","webpack:///./packages/kityMinder/src/minder.vue?0ae3","webpack:///./packages/kityMinder/index.js","webpack:///./examples/main.js","webpack:///./packages/kityMinder/src/minder.vue?b4c5"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_p","index","inited","returnValue","undefined","require","runtimes","assemble","runtime","KMEditor","selector","this","kityminder","Editor","HotBox","Minder","MimeType","SPLITOR","MIMETYPE","SIGN","process","mimetype","text","isPureText","_mimetype","whichMimeType","Error","getPureText","registMimeTypeProtocol","type","sign","getMimeTypeProtocol","getSpitor","getMimeType","MimeTypeRuntime","minder","supportClipboardEvent","kity","Browser","gecko","indexOf","split","ClipboardRuntime","Data","fsm","receiver","kmencode","decode","getRegisterProtocol","_selectedNodes","beforeCopy","e","document","activeElement","element","clipBoardEvent","state","nodes","concat","getSelectedNodes","targetLevel","sort","a","b","getLevel","pnode","idx","pidx","isAncestorOf","str","encode","clipboardData","setData","preventDefault","beforeCut","getStatus","execCommand","beforePaste","textData","getData","sNodes","_node","forEach","node","createNode","importNode","appendChild","select","refresh","items","imageFile","getAsFile","serverService","angular","body","injector","uploadImage","then","json","resp","errno","url","Text2Children","addEventListener","_nodes","exportNode","ContainerRuntime","container","querySelector","classList","add","Hotbox","Debug","DragRuntime","downX","downY","hotbox","setupFsm","when","exit","enter","reason","maxX","maxY","osx","osy","containerY","frame","MOUSE_HAS_DOWN","MOUSE_HAS_UP","BOUND_CHECK","flag","freeHorizen","freeVirtical","move","direction","speed","releaseFrame","requestFrame","_viewDragger","x","y","next","on","rect","getPaper","getBoundingClientRect","originEvent","clientX","clientY","top","width","height","getSelectedNode","Math","abs","active","STATE_IDLE","jump","debug","handlerConditionMatch","condition","FSM","defaultState","currentState","BEFORE_ARROW","AFTER_ARROW","handlers","newState","handler","oldState","notify","arguments","log","resolved","FSMRumtime","jsonDiff","HistoryRuntime","lastSnap","patchLock","undoDiffs","redoDiffs","MAX_HISTORY","reset","exportJson","makeUndoDiff","headSnap","diff","makeRedoDiff","revertSnap","undo","undoDiff","pop","applyPatches","redo","redoDiff","changed","hasUndo","hasRedo","updateSelection","patch","express","getChild","history","main","button","position","label","enable","action","HotboxRuntime","setParentFSM","box","getRenderBox","cx","cy","handleResult","dispatch","dispatchKeyEvent","focus","InputRuntime","receiverElement","isGecko","enterInputMode","exitInputMode","commitInputResult","onblur","_status","editText","setupReciverElement","flaged","onmousedown","stopPropagation","updatePosition","setupHotbox","queryCommandState","textContainer","innerText","createElement","queryCommandValue","fixFFCaretDisappeared","selectAll","fontSize","getStyle","style","minWidth","clientWidth","fontWeight","fontStyle","commitInputText","textNodes","_divChildNodes","space_l","TAB_CHAR","ENTER_CHAR","STR_CHECK","SPACE_CHAR","SPACE_CHAR_REGEXP","RegExp","String","fromCharCode","BR","isBold","isItalic","toString","textContent","replace","test","nodeName","childNodes","src","alt","di","setText","commitInputNode","decodeData","importText","childrenTreeData","children","childNode","fire","getRoot","renderTree","layout","setTimeout","innerHTML","rootText","getText","remove","planed","focusNode","timer","left","round","bottom","isIntendToInput","ctrlKey","metaKey","altKey","keyCode","JumpingRuntime","compositionLock","listen","is","safari","disable","MOUSE_RB","$element","MinderRuntime","enableKeyReceiver","enableAnimation","renderTo","setTheme","NodeRuntime","buttons","AppendLock","importNodeData","exportNodeData","parts","command","afterAppend","off","selectedNodes","PriorityRuntime","priority","ProgressRuntime","progress","parseInt","ReceiverRuntime","contentEditable","setAttribute","onkeydown","onkeypress","onkeyup","range","createRange","selection","getSelection","selectNodeContents","removeAllRanges","addRange","removeAttribute","blur","editor","parentElement","removeChild","$container","listeners","listener","keyExpression","subs","notifyState","format","noop","stringHash","hash","charCodeAt","debugMode","location","search","h","flagStyle","textStyle","output","console","template","args","match","$key","HTMLElement","__defineGetter__","ranges","rangeCount","getRangeAt","selectAllChildren","__defineSetter__","_objectKeys","keys","escapePathComponent","deepClone","obj","JSON","parse","stringify","_generate","mirror","patches","path","newKeys","oldKeys","deleted","oldVal","newVal","op","compare","tree1","tree2","keymap","CTRL_MASK","ALT_MASK","SHIFT_MASK","unknown","hashKeyExpression","hashKeyEvent","keyEvent","hashCode","shiftKey","keyIdentifier","substr","toLowerCase","Shift","Control","Alt","CapsLock","BackSpace","Tab","Enter","Esc","Space","PageUp","PageDown","End","Home","Insert","Left","Up","Right","Down","Direction","37","38","39","40","Del","NumLock","Cmd","CmdFF","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","aKeyCode","aCharCode","letter","moduleMapping","use","render","_vm","_h","$createElement","_c","_self","attrs","importJson","minderHandle","staticRenderFns","methods","val","component","_m","staticClass","props","default","$emit","install","Vue","kityMinder","config","productionTip","App","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,MAAS,GAGNK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,6ECvJT,yBAAwb,EAAG,G;;;;;;;;;CCS3b,WACA,IAAIyC,EAAK,CACLnB,EAAG,SAASoB,GACR,GAAID,EAAGC,GAAOC,OACV,OAAOF,EAAGC,GAAOjB,MAErB,GAA+B,oBAApBgB,EAAGC,GAAOjB,MAmBjB,OADAgB,EAAGC,GAAOC,QAAS,EACZF,EAAGC,GAAOjB,MAlBjB,IAAId,EAAS,CACTD,QAAS,IACVkC,EAAcH,EAAGC,GAAOjB,MAAM,KAAMd,EAAOD,QAASC,GAGvD,GAFA8B,EAAGC,GAAOC,QAAS,EACnBF,EAAGC,GAAOjB,MAAQmB,OACEC,IAAhBD,EACA,OAAOA,EAEP,IAAK,IAAIb,KAAOpB,EAAOD,QACnB,GAAIC,EAAOD,QAAQnB,eAAewC,GAG9B,OAFAU,EAAGC,GAAOC,QAAS,EACnBF,EAAGC,GAAOjB,MAAQd,EAAOD,QAClBC,EAAOD,UAYtC+B,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAI9B,IAAIoC,EAAW,GACf,SAASC,EAASC,GACdF,EAASrD,KAAKuD,GAElB,SAASC,EAASC,GACdC,KAAKD,SAAWA,EAChB,IAAK,IAAIjE,EAAI,EAAGA,EAAI6D,EAAS3D,OAAQF,IACP,mBAAf6D,EAAS7D,IAChB6D,EAAS7D,GAAGM,KAAK4D,KAAMA,MAmBnC,OAfAF,EAASF,SAAWA,EACpBA,EAASP,EAAGnB,EAAE,IACd0B,EAASP,EAAGnB,EAAE,IACd0B,EAASP,EAAGnB,EAAE,KACd0B,EAASP,EAAGnB,EAAE,KACd0B,EAASP,EAAGnB,EAAE,KACd0B,EAASP,EAAGnB,EAAE,KACd0B,EAASP,EAAGnB,EAAE,IACd0B,EAASP,EAAGnB,EAAE,IACd0B,EAASP,EAAGnB,EAAE,IACd0B,EAASP,EAAGnB,EAAE,KACd0B,EAASP,EAAGnB,EAAE,KACd0B,EAASP,EAAGnB,EAAE,KACd0B,EAASP,EAAGnB,EAAE,KACd0B,EAASP,EAAGnB,EAAE,KACPX,EAAOD,QAAUwC,IAahCT,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,OAAOA,EAAOD,QAAU2C,WAAWC,OAASb,EAAGnB,EAAE,KAKzDmB,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,OAAOA,EAAOD,QAAU4B,OAAOiB,SAKvCd,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,MAItC8B,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,OAAOA,EAAOD,QAAU4B,OAAOe,WAAWG,SAUlDf,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,SAAS8C,IAIL,IAAIC,EAAU,SACVC,EAAW,CACX,iBAAkB,KAElBC,EAAO,CACP,SAAU,UACV,IAAK,kBAaT,SAASC,EAAQC,EAAUC,GACvB,IAAKX,KAAKY,WAAWD,GAAO,CACxB,IAAIE,EAAYb,KAAKc,cAAcH,GACnC,IAAKE,EACD,MAAM,IAAIE,MAAM,oBAEpBJ,EAAOX,KAAKgB,YAAYL,GAE5B,OAAiB,IAAbD,EACOC,EAEJD,EAAWJ,EAAUK,EAQhCX,KAAKiB,uBAAyB,SAASC,EAAMC,GACzC,GAAIA,GAAQX,EAAKW,GACb,MAAM,IAAIJ,MAAM,sBAEpB,GAAIG,GAAUX,EAASW,GACnB,MAAM,IAAIH,MAAM,0BAEpBP,EAAKW,GAAQD,EACbX,EAASW,GAAQC,GAgBrBnB,KAAKoB,oBAAsB,SAASF,EAAMP,GACtC,IAAID,EAAWH,EAASW,KAAS,EACjC,YAAazB,IAATkB,EACOF,EAAQ7B,KAAKoB,KAAMU,GAEvBD,EAAQC,EAAUC,IAE7BX,KAAKqB,UAAY,WACb,OAAOf,GAEXN,KAAKsB,YAAc,SAASH,GACxB,YAAa1B,IAAT0B,EACOX,EAAKW,IAAS,KAElBZ,GAkBf,SAASgB,IACDvB,KAAKwB,OAAOC,wBAA0BC,KAAKC,QAAQC,QACnD5B,KAAKK,SAAW,IAAIA,GAG5B,OApBAA,EAASnE,UAAU0E,WAAa,SAASD,GACrC,QAASA,EAAKkB,QAAQ7B,KAAKqB,cAE/BhB,EAASnE,UAAU8E,YAAc,SAASL,GACtC,OAAIX,KAAKY,WAAWD,GACTA,EAEJA,EAAKmB,MAAM9B,KAAKqB,aAAa,IAExChB,EAASnE,UAAU4E,cAAgB,SAASH,GACxC,OAAIX,KAAKY,WAAWD,GACT,KAEJX,KAAKsB,YAAYX,EAAKmB,MAAM9B,KAAKqB,aAAa,KAOlD9D,EAAOD,QAAUiE,IAUhClC,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,SAASwE,IACL,IAAIP,EAASxB,KAAKwB,OACdQ,EAAO9C,OAAOe,WAAWzE,KAC7B,GAAKgG,EAAOC,wBAAyBC,KAAKC,QAAQC,MAAlD,CAGA,IAAIK,EAAMjC,KAAKiC,IACXC,EAAWlC,KAAKkC,SAChB7B,EAAWL,KAAKK,SAChB8B,EAAW9B,EAASe,oBAAoB,kBAAmBgB,EAASJ,EAAKK,oBAAoB,QAAQD,OACrGE,EAAiB,GAWjBC,EAAa,SAASC,GACtB,GAAIC,SAASC,eAAiBR,EAASS,QAAS,CAC5C,IAAIC,EAAiBJ,EACjBK,EAAQZ,EAAIY,QAChB,OAAQA,GACN,IAAK,QAEC,MAGN,IAAK,SAEC,IAAIC,EAAQ,GAAGC,OAAOvB,EAAOwB,oBAC7B,GAAIF,EAAM9G,OAAQ,CAIV,IAAIiH,EADR,GAAIH,EAAM9G,OAAS,EAMf,GAJA8G,EAAMI,MAAK,SAASC,EAAGC,GACnB,OAAOD,EAAEE,WAAaD,EAAEC,cAE5BJ,EAAcH,EAAM,GAAGO,WACnBJ,IAAgBH,EAAMA,EAAM9G,OAAS,GAAGqH,WAAY,CACpD,IAAYC,EAAOC,EAAM,EAAG/F,EAAIsF,EAAM9G,OAAQwH,EAAOhG,EAAI,EACzD8F,EAAQR,EAAMU,GACd,MAAOF,EAAMD,aAAeJ,EAAa,CACrCM,EAAM,EACN,MAAOA,EAAM/F,GAAKsF,EAAMS,GAAKF,aAAeJ,EAAa,CACrD,GAAIH,EAAMS,GAAKE,aAAaH,GAAQ,CAChCR,EAAM5F,OAAOsG,EAAM,GACnB,MAEJD,IAEJC,IACAF,EAAQR,EAAMU,IAI1B,IAAIE,EAAMC,EAAOb,GACjBF,EAAegB,cAAcC,QAAQ,aAAcH,GAEvDlB,EAAEsB,iBACF,SAKZC,EAAY,SAASvB,GACrB,GAAIC,SAASC,eAAiBR,EAASS,QAAS,CAC5C,GAA2B,WAAvBnB,EAAOwC,YAEP,YADAxB,EAAEsB,iBAGN,IAAIlB,EAAiBJ,EACjBK,EAAQZ,EAAIY,QAChB,OAAQA,GACN,IAAK,QAEC,MAGN,IAAK,SAEC,IAAIC,EAAQtB,EAAOwB,mBACfF,EAAM9G,SACN4G,EAAegB,cAAcC,QAAQ,aAAcF,EAAOb,IAC1DtB,EAAOyC,YAAY,eAEvBzB,EAAEsB,iBACF,SAKZI,EAAc,SAAS1B,GACvB,GAAIC,SAASC,eAAiBR,EAASS,QAAS,CAC5C,GAA2B,WAAvBnB,EAAOwC,YAEP,YADAxB,EAAEsB,iBAGN,IAAIlB,EAAiBJ,EACjBK,EAAQZ,EAAIY,QACZsB,EAAWvB,EAAegB,cAAcQ,QAAQ,cACpD,OAAQvB,GACN,IAAK,QAGC,IAAKxC,EAASO,WAAWuD,GAErB,YADA3B,EAAEsB,iBAGN,MAGN,IAAK,SAKC,IAAIO,EAAS7C,EAAOwB,mBACpB,GAAyC,mBAArC3C,EAASS,cAAcqD,GAAgC,CACvD,IACIG,EADAxB,EAAQV,EAAO/B,EAASW,YAAYmD,IAExCE,EAAOE,SAAQ,SAASC,GAEpB,IAAK,IAAI1I,EAAIgH,EAAM9G,OAAS,EAAGF,GAAK,EAAGA,IACnCwI,EAAQ9C,EAAOiD,WAAW,KAAMD,GAChChD,EAAOkD,WAAWJ,EAAOxB,EAAMhH,IAC/BwG,EAAehG,KAAKgI,GACpBE,EAAKG,YAAYL,MAGzB9C,EAAOoD,OAAOtC,GAAgB,GAC9BA,EAAiB,GACjBd,EAAOqD,cACJ,IAAIjC,EAAegB,eAAiBhB,EAAegB,cAAckB,MAAM,GAAG5D,KAAKW,QAAQ,UAAY,EAAG,CACzG,IAAIkD,EAAYnC,EAAegB,cAAckB,MAAM,GAAGE,YAClDC,EAAgBC,QAAQvC,QAAQF,SAAS0C,MAAMC,WAAWnH,IAAI,UAClE,OAAOgH,EAAcI,YAAYN,GAAWO,MAAK,SAASC,GACtD,IAAIC,EAAOD,EAAK/J,KACG,IAAfgK,EAAKC,OACLjE,EAAOyC,YAAY,QAASuB,EAAKhK,KAAKkK,QAI9CrB,EAAOE,SAAQ,SAASC,GACpBhD,EAAOmE,cAAcnB,EAAML,MAGnC3B,EAAEsB,iBACF,SAUhBrB,SAASmD,iBAAiB,OAAQrD,GAClCE,SAASmD,iBAAiB,MAAO7B,GACjCtB,SAASmD,iBAAiB,QAAS1B,GAtJnC,SAASP,EAAOb,GAEZ,IADA,IAAI+C,EAAS,GACJ/J,EAAI,EAAG0B,EAAIsF,EAAM9G,OAAQF,EAAI0B,EAAG1B,IACrC+J,EAAOvJ,KAAKkF,EAAOsE,WAAWhD,EAAMhH,KAExC,OAAOqG,EAASH,EAAKK,oBAAoB,QAAQsB,OAAOkC,KAmJhE,OAAOtI,EAAOD,QAAUyE,IAahC1C,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAI9B,SAASwI,IACL,IAAIC,EAMJ,GAJIA,EADwB,iBAAjBhG,KAAKD,SACA0C,SAASwD,cAAcjG,KAAKD,UAE5BC,KAAKD,UAEhBiG,EAAW,MAAM,IAAIjF,MAAM,qBAAuBf,KAAKD,UAE5DiG,EAAUE,UAAUC,IAAI,aAExBnG,KAAKgG,UAAYA,EAErB,OAAOzI,EAAOD,QAAUyI,IAahC1G,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI6I,EAAS/G,EAAGnB,EAAE,GACdmI,EAAQhH,EAAGnB,EAAE,IACL,IAAImI,EAAM,QACtB,SAASC,IACL,IAeIC,EAAOC,EAfPvE,EAAMjC,KAAKiC,IACXT,EAASxB,KAAKwB,OACdiF,EAASzG,KAAKyG,OACdvE,EAAWlC,KAAKkC,SACEA,EAASS,QAI/B,SAAS+D,IAELzE,EAAI0E,KAAK,aAAa,eACtB1E,EAAI0E,KAAK,aAAa,SAASC,EAAMC,EAAOC,OALhDJ,IAUA,IAIIK,EAAMC,EAAMC,EAAKC,EAAKC,EAEtBC,EANAC,EAAiB,EACjBC,EAAe,EACfC,EAAc,GACdC,EAAOF,EAEPG,GAAc,EAAOC,GAAe,EAExC,SAASC,EAAKC,EAAWC,GACrB,IAAKD,EAID,OAHAH,EAAcC,GAAe,EAC7BN,GAAS1F,KAAKoG,aAAaV,QAC3BA,EAAQ,MAGPA,IACDA,EAAQ1F,KAAKqG,aAAa,SAASH,EAAWC,EAAOrG,GACjD,OAAO,SAAS4F,GACZ,OAAQQ,GACN,IAAK,OACHpG,EAAOwG,aAAaL,KAAK,CACrBM,GAAIJ,EACJK,EAAG,GACJ,GACH,MAEF,IAAK,MACH1G,EAAOwG,aAAaL,KAAK,CACrBM,EAAG,EACHC,GAAIL,GACL,GACH,MAEF,IAAK,QACHrG,EAAOwG,aAAaL,KAAK,CACrBM,EAAGJ,EACHK,EAAG,GACJ,GACH,MAEF,IAAK,SACH1G,EAAOwG,aAAaL,KAAK,CACrBM,EAAG,EACHC,EAAGL,GACJ,GACH,MAEF,QACE,OAEJT,EAAMe,QAlCY,CAoCxBP,EAAWC,EAAOrG,KAG5BA,EAAO4G,GAAG,aAAa,SAAS5F,GAC5BgF,EAAOH,EACP,IAAIgB,EAAO7G,EAAO8G,WAAWtC,UAAUuC,wBACvChC,EAAQ/D,EAAEgG,YAAYC,QACtBjC,EAAQhE,EAAEgG,YAAYE,QACtBvB,EAAakB,EAAKM,IAClB5B,EAAOsB,EAAKO,MACZ5B,EAAOqB,EAAKQ,UAEhBrH,EAAO4G,GAAG,aAAa,SAAS5F,GAsB5B,GArBoB,SAAhBP,EAAIY,SAAsB2E,GAAQH,GAAkB7F,EAAOsH,oBAAsBC,KAAKC,IAAIzC,EAAQ/D,EAAEgG,YAAYC,SAAWlB,GAAewB,KAAKC,IAAIxC,EAAQhE,EAAEgG,YAAYE,SAAWnB,KACpLN,EAAMzE,EAAEgG,YAAYC,QACpBvB,EAAM1E,EAAEgG,YAAYE,QAAUvB,EAC1BF,EAAMM,EACNI,EAAK,QAASJ,EAAcN,GACrBA,EAAMF,EAAOQ,EACpBI,EAAK,OAAQJ,EAAcN,EAAMF,GAEjCU,GAAc,EAEdP,EAAMK,EACNI,EAAK,SAAUT,GACRA,EAAMF,EAAOO,EACpBI,EAAK,MAAOJ,EAAcL,EAAMF,GAEhCU,GAAe,EAEfD,GAAeC,GACfC,GAAK,IAGO,SAAhB1F,EAAIY,SAAsB2E,IAASH,GAAkB7F,EAAOsH,oBAAsBC,KAAKC,IAAIzC,EAAQ/D,EAAEgG,YAAYC,SAAWlB,GAAewB,KAAKC,IAAIxC,EAAQhE,EAAEgG,YAAYE,SAAWnB,GAIrL,MAHoB,WAAhBtF,EAAIY,SACJ4D,EAAOwC,OAAO7C,EAAO8C,YAElBjH,EAAIkH,KAAK,OAAQ,gBAGhCjK,OAAO0G,iBAAiB,WAAW,WAE/B,GADA4B,EAAOF,EACa,SAAhBrF,EAAIY,QAEJ,OADA8E,GAAK,GACE1F,EAAIkH,KAAK,SAAU,kBAE/B,GAEP,OAAO5L,EAAOD,QAAUgJ,IAahCjH,EAAG,GAAK,CACJhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI8I,EAAQhH,EAAGnB,EAAE,IACbkL,EAAQ,IAAI/C,EAAM,OACtB,SAASgD,EAAsBC,EAAW3C,EAAMC,EAAMC,GAClD,OAAIyC,EAAU3C,MAAQA,KACC,KAAnB2C,EAAUzC,OAAgByC,EAAUzC,OAASA,KAC3B,KAAlByC,EAAU1C,MAAe0C,EAAU1C,MAAQA,QAA/C,IAGJ,SAAS2C,EAAIC,GACT,IAAIC,EAAeD,EACfE,EAAe,MACfC,EAAc,OACdC,EAAW,GASf5J,KAAKmJ,KAAO,SAASU,EAAU/C,GAC3B,IAAKA,EAAQ,MAAM,IAAI/F,MAAM,sCAC7B,IAEIjF,EAAGgO,EAFHC,EAAWN,EACXO,EAAS,CAAED,EAAUF,GAAW9G,OAAO,GAAG3D,MAAMhD,KAAK6N,UAAW,IAGpE,IAAKnO,EAAI,EAAGA,EAAI8N,EAAS5N,OAAQF,IAE7B,GADAgO,EAAUF,EAAS9N,GACfuN,EAAsBS,EAAQR,UAAW,SAAUS,EAAUF,IACzDC,EAAQnN,MAAM,KAAMqN,GAAS,OAMzC,IAHAP,EAAeI,EACfT,EAAMc,IAAI,mBAAoBpD,EAAQiD,EAAUF,GAE3C/N,EAAI,EAAGA,EAAI8N,EAAS5N,OAAQF,IAC7BgO,EAAUF,EAAS9N,GACfuN,EAAsBS,EAAQR,UAAW,QAASS,EAAUF,IAC5DC,EAAQnN,MAAM,KAAMqN,GAG5B,OAAOP,GAMXzJ,KAAK6C,MAAQ,WACT,OAAO4G,GAeXzJ,KAAK2G,KAAO,SAAS2C,EAAWQ,GAK5B,IAAInD,EAAMwD,EAAUvD,EAAMC,EAU1B,GAdwB,GAApBoD,UAAUjO,SACV8N,EAAUR,EACVA,EAAY,UAGhBa,EAAWb,EAAUxH,MAAM4H,GACJ,GAAnBS,EAASnO,OACT2K,EAAO,UAEPwD,EAAWb,EAAUxH,MAAM6H,GACJ,GAAnBQ,EAASnO,SACT2K,EAAO,WAGVA,EAAM,MAAM,IAAI5F,MAAM,0BAA4BuI,GACvD1C,EAAOuD,EAAS,GAChBtD,EAAQsD,EAAS,GACjBL,EAAQR,UAAY,CAChB3C,KAAMA,EACNC,KAAMA,EACNC,MAAOA,GAEX+C,EAAStN,KAAKwN,IAGtB,SAASM,IACLpK,KAAKiC,IAAM,IAAIsH,EAAI,UAEvB,OAAOhM,EAAOD,QAAU8M,IAahC/K,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI8M,EAAWhL,EAAGnB,EAAE,IACpB,SAASoM,IACL,IAGIC,EACAC,EACAC,EACAC,EANAlJ,EAASxB,KAAKwB,OACdiF,EAASzG,KAAKyG,OACdkE,EAAc,IAKlB,SAASC,IACLH,EAAY,GACZC,EAAY,GACZH,EAAW/I,EAAOqJ,aAEtB,SAASC,IACL,IAAIC,EAAWvJ,EAAOqJ,aAClBG,EAAOX,EAASU,EAAUR,GAC9B,GAAIS,EAAKhP,OAAQ,CACbyO,EAAUnO,KAAK0O,GACf,MAAOP,EAAUzO,OAAS2O,EACtBF,EAAUhO,QAGd,OADA8N,EAAWQ,GACJ,GAGf,SAASE,IACL,IAAIC,EAAa1J,EAAOqJ,aACxBH,EAAUpO,KAAK+N,EAASa,EAAYX,IACpCA,EAAWW,EAEf,SAASC,IACLX,GAAY,EACZ,IAAIY,EAAWX,EAAUY,MACrBD,IACA5J,EAAO8J,aAAaF,GACpBH,KAEJT,GAAY,EAEhB,SAASe,IACLf,GAAY,EACZ,IAAIgB,EAAWd,EAAUW,MACrBG,IACAhK,EAAO8J,aAAaE,GACpBV,KAEJN,GAAY,EAEhB,SAASiB,IACDjB,GACAM,MAAgBJ,EAAY,IAEpC,SAASgB,IACL,QAASjB,EAAUzO,OAEvB,SAAS2P,IACL,QAASjB,EAAU1O,OAEvB,SAAS4P,EAAgBpJ,GACrB,GAAKgI,EAAL,CACA,IAAIqB,EAAQrJ,EAAEqJ,MACd,OAAQA,EAAMC,SACZ,IAAK,WACHtK,EAAOoD,OAAOiH,EAAMrH,KAAKuH,SAASF,EAAMvM,QAAQ,GAChD,MAEF,IAAK,cACL,IAAK,eACL,IAAK,cACL,IAAK,WACHkC,EAAOoD,OAAOiH,EAAMrH,MAAM,GAC1B,QAGRxE,KAAKgM,QAAU,CACXpB,MAAOA,EACPO,KAAMA,EACNI,KAAMA,EACNG,QAASA,EACTC,QAASA,GAEbf,IACApJ,EAAO4G,GAAG,gBAAiBqD,GAC3BjK,EAAO4G,GAAG,SAAUwC,GACpBpJ,EAAO4G,GAAG,QAASwD,GACnB,IAAIK,EAAOxF,EAAO5D,MAAM,QACxBoJ,EAAKC,OAAO,CACRC,SAAU,MACVC,MAAO,KACPzN,IAAK,WACL0N,OAAQX,EACRY,OAAQnB,EACRhD,KAAM,SAEV8D,EAAKC,OAAO,CACRC,SAAU,MACVC,MAAO,KACPzN,IAAK,WACL0N,OAAQV,EACRW,OAAQf,EACRpD,KAAM,SAId,OADAjJ,OAAO8L,KAAOX,EACP9M,EAAOD,QAAUgN,IAahCjL,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI6I,EAAS/G,EAAGnB,EAAE,GAClB,SAASqO,IACL,IAAItK,EAAMjC,KAAKiC,IACXT,EAASxB,KAAKwB,OACdU,EAAWlC,KAAKkC,SAChB8D,EAAYhG,KAAKgG,UACjBS,EAAS,IAAIL,EAAOJ,GACxBS,EAAO+F,aAAavK,GACpBA,EAAI0E,KAAK,oBAAoB,SAASC,EAAMC,EAAOC,GAC/C,IACIqF,EADA3H,EAAOhD,EAAOsH,kBAElB,GAAItE,EAAM,CACN,IAAIiI,EAAMjI,EAAKkI,eACfP,EAAW,CACPlE,EAAGwE,EAAIE,GACPzE,EAAGuE,EAAIG,IAGfnG,EAAOwC,OAAO,OAAQkD,MAE1BlK,EAAI0E,KAAK,oBAAoB,SAASC,EAAMC,EAAOC,EAAQtE,GACvD,GAAc,mBAAVsE,EAA6B,CAC7B,IAAI+F,EAAepG,EAAOqG,SAAStK,GAC/BqK,EACArK,EAAEsB,iBAEFtC,EAAOuL,iBAAiBvK,OAIpCP,EAAI0E,KAAK,mBAAmB,SAASC,EAAMC,EAAOC,EAAQtE,GACxC,sBAAVsE,GACA5E,EAASS,QAAQqK,WAGzBhN,KAAKyG,OAASA,EAElB,OAAOlJ,EAAOD,QAAUiP,IAahClN,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B8B,EAAGnB,EAAE,IACL,IAAImI,EAAQhH,EAAGnB,EAAE,IACbkL,EAAQ,IAAI/C,EAAM,SACtB,SAAS4G,IACL,IAAIhL,EAAMjC,KAAKiC,IACXT,EAASxB,KAAKwB,OACdiF,EAASzG,KAAKyG,OACdvE,EAAWlC,KAAKkC,SAChBgL,EAAkBhL,EAASS,QAC3BwK,EAAUjO,OAAOwC,KAAKC,QAAQC,MAQlC,SAAS8E,IAELzE,EAAI0E,KAAK,aAAcyG,GAEvBnL,EAAI0E,KAAK,cAAc,SAASC,EAAMC,EAAOC,GACzC,OAAQA,GACN,IAAK,eACH,OAAOuG,IAET,IAAK,eACL,QACE,OAAOC,QAIfpL,EAASqL,QAAO,SAAS/K,GACF,SAAfP,EAAIY,SACJZ,EAAIkH,KAAK,SAAU,mBAG3B3H,EAAO4G,GAAG,mBAAmB,WACN,SAAfnG,EAAIY,SACJZ,EAAIkH,KAAK,SAAU,mBAG3B3H,EAAO4G,GAAG,YAAY,WACd5G,EAAOsH,mBAAwC,aAAnBtH,EAAOgM,SACnCC,OAKZ,SAASC,IACDtE,EAAMuE,QACNT,EAAgBhH,UAAUC,IAAI,SAElC+G,EAAgBU,YAAc,SAASpL,GACnCA,EAAEqL,mBAENrM,EAAO4G,GAAG,0DAA0D,SAAS5F,GAE3D,cAAVA,EAAEtB,MAAuC,SAAfe,EAAIY,SAClCiL,OAEJA,IAGJ,SAASC,IACLtH,EAAO5D,MAAM,QAAQqJ,OAAO,CACxBC,SAAU,SACVC,MAAO,KACPzN,IAAK,KACL0N,OAAQ,WACJ,OAA4C,GAArC7K,EAAOwM,kBAAkB,SAEpC1B,OAAQmB,IAShB,SAASA,IACL,IAAIjJ,EAAOhD,EAAOsH,kBAClB,GAAKtE,EAAL,CAGA,IAAIyJ,EAAgBf,EAEpB,GADAA,EAAgBgB,UAAY,GACQ,SAAhC1J,EAAKJ,QAAQ,eAA2B,CACxC,IAAIhB,EAAIX,SAAS0L,cAAc,KAC/BF,EAActJ,YAAYvB,GAC1B6K,EAAgB7K,EAEpB,GAAmC,WAA/BoB,EAAKJ,QAAQ,cAA4B,CACzC,IAAItI,EAAI2G,SAAS0L,cAAc,KAC/BF,EAActJ,YAAY7I,GAC1BmS,EAAgBnS,EAEpBmS,EAAcC,UAAY1M,EAAO4M,kBAAkB,QAC/CjB,GACAjL,EAASmM,wBAEbpM,EAAIkH,KAAK,QAAS,iBAClBjH,EAASoM,aAOb,SAASlB,IACL,IAAI5I,EAAOhD,EAAOsH,kBAClB,GAAItE,EAAM,CACN,IAAI+J,EAAW/J,EAAKJ,QAAQ,cAAgBI,EAAKgK,SAAS,aAC1DtB,EAAgBuB,MAAMF,SAAWA,EAAW,KAC5CrB,EAAgBuB,MAAMC,SAAW,EACjCxB,EAAgBuB,MAAMC,SAAWxB,EAAgByB,YAAc,KAC/DzB,EAAgBuB,MAAMG,WAAapK,EAAKJ,QAAQ,gBAAkB,GAClE8I,EAAgBuB,MAAMI,UAAYrK,EAAKJ,QAAQ,eAAiB,GAChE8I,EAAgBhH,UAAUC,IAAI,SAC9B+G,EAAgBF,SAUxB,SAAS8B,EAAgBC,GAKrB,IAJA,IAISrL,EAAKsL,EAAgBC,EAJ1BtO,EAAO,GACPuO,EAAW,KAAMC,EAAa,KAAMC,EAAY,KAAMC,EAAa,IACvEC,EAAoB,IAAIC,OAAO,MAAQC,OAAOC,aAAa,KAAO,KAAMC,EAAKjN,SAAS0L,cAAc,MAChGwB,GAAS,EAAOC,GAAW,EAC4B9T,EAAI,EAAG0B,EAAIuR,EAAU/S,OAAQF,EAAI0B,EAAG1B,IAE3F,OADA4H,EAAMqL,EAAUjT,GACRG,OAAOC,UAAU2T,SAASzT,KAAKsH,IAEnC,IAAK,yBAED/C,GAAQwO,EACR,MAGN,IAAK,gBAWC,GADAzL,EAAMA,EAAIoM,YAAYC,QAAQ,SAAU,KACnCX,EAAUY,KAAKtM,GAUhB/C,GAAQ+C,MAVc,CACtBuL,EAAUvL,EAAI1H,OACd,MAAOiT,IACCK,EAAkBU,KAAKtM,EAAIuL,IAC3BtO,GAAQ0O,EACD3L,EAAIuL,KAAaC,IACxBvO,GAAQuO,GAMpB,MAIJ,IAAK,uBAED,OAAQxL,EAAIuM,UACV,IAAK,IAECN,GAAS,EACT,MAGN,IAAK,IAECC,GAAW,EACX,MAGN,SAGF,GAAG1S,OAAOP,MAAMoS,EAAW,CAAEjT,EAAG,GAAIiH,OAAO,GAAG3D,MAAMhD,KAAKsH,EAAIwM,cAC7D1S,EAAIuR,EAAU/S,OACdF,IACA,MAIJ,IAAK,2BAED,GAAGoB,OAAOP,MAAMoS,EAAW,CAAEjT,EAAG,GAAIiH,OAAO,GAAG3D,MAAMhD,KAAKsH,EAAIwM,cAC7D1S,EAAIuR,EAAU/S,OACdF,IACA,MAIJ,IAAK,4BAEG4H,EAAIyM,KACA,gBAAgBH,KAAKtM,EAAIyM,MACzB3O,EAAOyC,YAAY,QAASP,EAAIyM,IAAKzM,EAAI0M,KAGjD,MAIJ,IAAK,0BAEDpB,EAAiB,GACZ,IAAIqB,EAAK,EAAd,IAAiB7S,EAAIkG,EAAIwM,WAAWlU,OAAQqU,EAAK7S,EAAG6S,IAChDrB,EAAe1S,KAAKoH,EAAIwM,WAAWG,IAEvCrB,EAAe1S,KAAKoT,GACpB,GAAGxS,OAAOP,MAAMoS,EAAW,CAAEjT,EAAG,GAAIiH,OAAOiM,IAC3CxR,EAAIuR,EAAU/S,OACdF,IACA,MAGN,QAEM,GAAI4H,GAAOA,EAAIwM,WAAWlU,OAAQ,CAC9BgT,EAAiB,GACjB,IAASqB,EAAK,EAAG7S,EAAIkG,EAAIwM,WAAWlU,OAAQqU,EAAK7S,EAAG6S,IAChDrB,EAAe1S,KAAKoH,EAAIwM,WAAWG,IAEvCrB,EAAe1S,KAAKoT,GACpB,GAAGxS,OAAOP,MAAMoS,EAAW,CAAEjT,EAAG,GAAIiH,OAAOiM,IAC3CxR,EAAIuR,EAAU/S,OACdF,SAEI4H,QAA2BjE,IAApBiE,EAAIoM,YACXnP,GAAQ+C,EAAIoM,YAEZnP,GAAQ,GAoB5B,OAdAA,EAAOA,EAAKoP,QAAQ,aAAc,IAClCpP,EAAOA,EAAKoP,QAAQ,IAAIR,OAAO,kBAAoBC,OAAOC,aAAa,KAAO,OAAQ,KAAM,QAC5FjO,EAAOsH,kBAAkBwH,QAAQ3P,GAC7BgP,EACAnO,EAAOwM,kBAAkB,SAAWxM,EAAOyC,YAAY,QAEvDzC,EAAOwM,kBAAkB,SAAWxM,EAAOyC,YAAY,QAEvD2L,EACApO,EAAOwM,kBAAkB,WAAaxM,EAAOyC,YAAY,UAEzDzC,EAAOwM,kBAAkB,WAAaxM,EAAOyC,YAAY,UAE7DoJ,IACO1M,EASX,SAAS4P,EAAgB/L,EAAM7D,GAC3B,IACIa,EAAOgP,WAAW,OAAQ7P,GAAM2E,MAAK,SAASC,GAC1C,SAASkL,EAAWjM,EAAMe,EAAM/D,GAC5B,IAAIhG,EAAO+J,EAAK/J,KAChBgJ,EAAK8L,QAAQ9U,EAAKmF,MAAQ,IAE1B,IADA,IAAI+P,EAAmBnL,EAAKoL,UAAY,GAC/B7U,EAAI,EAAGA,EAAI4U,EAAiB1U,OAAQF,IAAK,CAC9C,IAAI8U,EAAYpP,EAAOiD,WAAW,KAAMD,GACxCiM,EAAWG,EAAWF,EAAiB5U,GAAI0F,GAE/C,OAAOgD,EAEXiM,EAAWjM,EAAMe,EAAM/D,GACvBA,EAAOqP,KAAK,iBACZrP,EAAOsP,UAAUC,aACjBvP,EAAOwP,OAAO,QAEpB,MAAOxO,GAIL,GAHAhB,EAAOqP,KAAK,iBACZrP,EAAOsP,UAAUC,aAEI,gCAAjBvO,EAAEqN,WACF,MAAMrN,GAIlB,SAAS8K,IAQL,IAAIyB,EAAY,GAAG3P,MAAMhD,KAAK8Q,EAAgBgD,YAO9Ce,YAAW,WAEP/D,EAAgBgE,UAAY,KAC7B,GACH,IAAI1M,EAAOhD,EAAOsH,kBAGlB,GAFAiG,EAAYD,EAAgBC,GAC5BwB,EAAgB/L,EAAMuK,GACL,QAAbvK,EAAKtD,KAAgB,CACrB,IAAIiQ,EAAW3P,EAAOsP,UAAUM,UAChC5P,EAAOqP,KAAK,iBAAkB,CAC1BlQ,KAAMwQ,KAIlB,SAAS9D,IACLH,EAAgBhH,UAAUmL,OAAO,SACjCnP,EAASoM,YAEb,SAASR,IACL,IAAIwD,EAASxD,EACTyD,EAAY/P,EAAOsH,kBAClByI,IACAD,EAAOE,QACRF,EAAOE,MAAQP,YAAW,WACtB,IAAIxE,EAAM8E,EAAU7E,aAAa,gBACjCQ,EAAgBuB,MAAMgD,KAAO1I,KAAK2I,MAAMjF,EAAIxE,GAAK,KACjDiF,EAAgBuB,MAAM9F,KAAOS,EAAMuE,OAAS5E,KAAK2I,MAAMjF,EAAIkF,OAAS,IAAM5I,KAAK2I,MAAMjF,EAAIvE,IAAM,KAE/FoJ,EAAOE,MAAQ,OA7U3B9D,IACAhH,IACAqH,IAEA/N,KAAKyN,SAAWA,EA8UpB,OAAOlQ,EAAOD,QAAU2P,IAahC5N,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI6I,EAAS/G,EAAGnB,EAAE,GAElB,SAAS0T,EAAgBpP,GACrB,QAAIA,EAAEqP,SAAWrP,EAAEsP,SAAWtP,EAAEuP,UAE5BvP,EAAEwP,SAAW,IAAMxP,EAAEwP,SAAW,KAEhCxP,EAAEwP,SAAW,IAAMxP,EAAEwP,SAAW,KAEnB,KAAbxP,EAAEwP,SAAkBxP,EAAEwP,SAAW,IAAMxP,EAAEwP,SAAW,MAGvC,KAAbxP,EAAEwP,SAAkBxP,EAAEwP,SAAW,IAAMxP,EAAEwP,SAAW,MAEvC,KAAbxP,EAAEwP,SAAgC,IAAdxP,EAAEwP,aAW9B,SAASC,IACL,IA0FI1L,EAAOC,EA1FPvE,EAAMjC,KAAKiC,IACXT,EAASxB,KAAKwB,OACdU,EAAWlC,KAAKkC,SAChB8D,EAAYhG,KAAKgG,UACjBkH,EAAkBhL,EAASS,QAC3B8D,EAASzG,KAAKyG,OACdyL,GAAkB,EAEtBhQ,EAASiQ,OAAO,UAAU,SAAS3P,GAI/B,GAFAN,EAASmK,SAEL7J,EAAE4P,GAAG,SAML,OALA5P,EAAEsB,iBAEEpC,KAAKC,QAAQ0Q,SACbnF,EAAgBgE,UAAY,IAEzBjP,EAAIkH,KAAK,SAAU,iBAO9B,OAAQ3G,EAAEtB,MACR,IAAK,UAEC,GAAIM,EAAOsH,mBACP,GAAI8I,EAAgBpP,GAChB,OAAOP,EAAIkH,KAAK,QAAS,mBAG7B+D,EAAgBgE,UAAY,GAGhCjP,EAAIkH,KAAK,SAAU,kBAAmB3G,GACtC,MAGN,IAAK,QAEC,MAGN,aAKNN,EAASiQ,OAAO,UAAU,SAAS3P,GAC/BN,EAASoQ,UACT9P,EAAEsB,iBACiB2C,EAAOqG,SAAStK,GACnC,GAAIiE,EAAO5D,SAAWuD,EAAO8C,YAA6B,UAAfjH,EAAIY,QAC3C,OAAOZ,EAAIkH,KAAK,SAAU,kBAIlCjH,EAASiQ,OAAO,SAAS,SAAS3P,GAE9B,GADAN,EAASmK,SACK,WAAV7J,EAAEtB,KAAmB,CACrB,GAAIsB,EAAE4P,GAAG,SAEL,OADA5P,EAAEsB,iBACK7B,EAAIkH,KAAK,SAAU,gBAE9B,GAAI3G,EAAE4P,GAAG,OAEL,OADA5P,EAAEsB,iBACK7B,EAAIkH,KAAK,SAAU,iBAE1B3G,EAAE4P,GAAG,QAAU5P,EAAE4P,GAAG,iBACpB5P,EAAEsB,sBAEH,GAAc,SAAVtB,EAAEtB,MAAmBsB,EAAE4P,GAAG,QAEjC,GADA5P,EAAEsB,kBACGoO,EACD,OAAOjQ,EAAIkH,KAAK,SAAU,oBAEb,oBAAV3G,EAAEtB,KACTgR,GAAkB,EACD,kBAAV1P,EAAEtB,MACT+P,YAAW,WACPiB,GAAkB,QAS9B,IAAIK,EAAW,EAEfvM,EAAUJ,iBAAiB,aAAa,SAASpD,GACzCA,EAAE0J,QAAUqG,GACZ/P,EAAEsB,iBAEa,UAAf7B,EAAIY,SACJ4D,EAAOwC,OAAO7C,EAAO8C,YACrBjH,EAAIkH,KAAK,SAAU,SACG,UAAflH,EAAIY,SAAuBL,EAAE0J,QAAUqG,IAC9ChM,EAAQ/D,EAAEiG,QACVjC,EAAQhE,EAAEkG,YAEf,GACH1C,EAAUJ,iBAAiB,cAAc,SAASpD,GAC3B,UAAfP,EAAIY,UACJ4D,EAAOwC,OAAO7C,EAAO8C,YACrBjH,EAAIkH,KAAK,SAAU,sBAExB,GACHnD,EAAUJ,iBAAiB,eAAe,SAASpD,GAC/CA,EAAEsB,oBAENkC,EAAUJ,iBAAiB,WAAW,SAASpD,GACxB,UAAfP,EAAIY,SAGJL,EAAE0J,QAAUqG,GAAY/P,EAAEiG,SAAWlC,GAAS/D,EAAEkG,SAAWlC,GAG1DhF,EAAOsH,mBAGZ7G,EAAIkH,KAAK,SAAU,mBACpB,GAEH1C,EAAO+L,SAAS5M,iBAAiB,aAAa,SAASpD,GACnDA,EAAEqL,qBAGV,OAAOtQ,EAAOD,QAAU2U,IAahC5S,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI6C,EAASf,EAAGnB,EAAE,GAClB,SAASuU,IAEL,IAAIjR,EAAS,IAAIpB,EAAO,CACpBsS,mBAAmB,EACnBC,iBAAiB,IAGrBnR,EAAOoR,SAAS5S,KAAKD,UACrByB,EAAOqR,SAAS,MAChBrR,EAAOoD,OAAOpD,EAAOsP,WAAW,GAChCtP,EAAOyC,YAAY,OAAQ,QAE3BjE,KAAKwB,OAASA,EAElB,OAAOjE,EAAOD,QAAUmV,IAKhCpT,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,SAASuV,IACL,IAAIjT,EAAUG,KACVwB,EAASxB,KAAKwB,OACdiF,EAASzG,KAAKyG,OACdxE,EAAMjC,KAAKiC,IACXgK,EAAOxF,EAAO5D,MAAM,QACpBkQ,EAAU,CAAE,sBAAuB,gCAAiC,6BAA8B,0BAA2B,iCAAkC,8CAC/JC,EAAa,EAsDjB,SAASC,IACLzR,EAAOqP,KAAK,kBAEhB,SAASqC,IACL1R,EAAOqP,KAAK,kBAzDhBkC,EAAQxO,SAAQ,SAAS2H,GACrB,IAAIiH,EAAQjH,EAAOpK,MAAM,KACrBsK,EAAQ+G,EAAM1W,QACdkC,EAAMwU,EAAM1W,QACZ2W,EAAUD,EAAM1W,QACpBwP,EAAKC,OAAO,CACRC,SAAU,OACVC,MAAOA,EACPzN,IAAKA,EACL2N,OAAQ,WACJ,GAAkC,IAA9B8G,EAAQvR,QAAQ,UAAiB,CAIjC,SAASwR,MACEL,GACHnT,EAAQ4N,WAEZjM,EAAO8R,IAAI,kBAAmBD,GAPlCL,IACAxR,EAAOyC,YAAYmP,EAAS,QAQ5B5R,EAAO4G,GAAG,kBAAmBiL,QAE7B7R,EAAOyC,YAAYmP,GACnBnR,EAAIkH,KAAK,SAAU,qBAG3BkD,OAAQ,WACJ,OAA6C,GAAtC7K,EAAOwM,kBAAkBoF,SAI5CnH,EAAKC,OAAO,CACRC,SAAU,SACVC,MAAO,OACPzN,IAAK,UACL0N,OAAQ,WACJ,IAAIkH,EAAgB/R,EAAOwB,mBAC3B,OAA+B,GAAxBuQ,EAAcvX,QAEzBsQ,OAAQ2G,EACR9K,KAAM,SAEV8D,EAAKC,OAAO,CACRC,SAAU,SACVC,MAAO,OACPzN,IAAK,UACL0N,OAAQ,WACJ,IAAIkH,EAAgB/R,EAAOwB,mBAC3B,OAA+B,GAAxBuQ,EAAcvX,QAEzBsQ,OAAQ4G,EACR/K,KAAM,SASd,OAAO5K,EAAOD,QAAUwV,IAKhCzT,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,SAASiW,IACL,IAAIhS,EAASxB,KAAKwB,OACdiF,EAASzG,KAAKyG,OACdwF,EAAOxF,EAAO5D,MAAM,QACxBoJ,EAAKC,OAAO,CACRC,SAAU,MACVC,MAAO,MACPzN,IAAK,IACLwJ,KAAM,WACNkE,OAAQ,WACJ,OAAgD,GAAzC7K,EAAOwM,kBAAkB,eAGxC,IAAIyF,EAAWhN,EAAO5D,MAAM,YAC5B,YAAYkN,QAAQ,MAAM,SAAS/Q,GAC/ByU,EAASvH,OAAO,CACZC,SAAU,OACVC,MAAO,IAAMpN,EACbL,IAAKK,EACLsN,OAAQ,WACJ9K,EAAOyC,YAAY,WAAYjF,SAI3CyU,EAASvH,OAAO,CACZC,SAAU,SACVC,MAAO,KACPzN,IAAK,MACL2N,OAAQ,WACJ9K,EAAOyC,YAAY,WAAY,MAGvCwP,EAASvH,OAAO,CACZC,SAAU,MACVC,MAAO,KACPzN,IAAK,MACLwJ,KAAM,SAGd,OAAO5K,EAAOD,QAAUkW,IAKhCnU,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,SAASmW,IACL,IAAIlS,EAASxB,KAAKwB,OACdiF,EAASzG,KAAKyG,OACdwF,EAAOxF,EAAO5D,MAAM,QACxBoJ,EAAKC,OAAO,CACRC,SAAU,MACVC,MAAO,KACPzN,IAAK,IACLwJ,KAAM,WACNkE,OAAQ,WACJ,OAAgD,GAAzC7K,EAAOwM,kBAAkB,eAGxC,IAAI2F,EAAWlN,EAAO5D,MAAM,YAC5B,YAAYkN,QAAQ,MAAM,SAAS/Q,GAC/B2U,EAASzH,OAAO,CACZC,SAAU,OACVC,MAAO,IAAMpN,EACbL,IAAKK,EACLsN,OAAQ,WACJ9K,EAAOyC,YAAY,WAAY2P,SAAS5U,GAAK,SAIzD2U,EAASzH,OAAO,CACZC,SAAU,SACVC,MAAO,KACPzN,IAAK,MACL2N,OAAQ,WACJ9K,EAAOyC,YAAY,WAAY,MAGvC0P,EAASzH,OAAO,CACZC,SAAU,MACVC,MAAO,KACPzN,IAAK,MACLwJ,KAAM,SAGd,OAAO5K,EAAOD,QAAUoW,IAahCrU,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAIoB,EAAMU,EAAGnB,EAAE,IACFmB,EAAGnB,EAAE,GAClB,SAAS2V,IACL,IAAI5R,EAAMjC,KAAKiC,IACXT,EAASxB,KAAKwB,OAGdmB,EAAUF,SAAS0L,cAAc,OACrCxL,EAAQmR,iBAAkB,EAM1BnR,EAAQoR,aAAa,YAAa,GAClCpR,EAAQuD,UAAUC,IAAI,YACtBxD,EAAQqR,UAAYrR,EAAQsR,WAAatR,EAAQuR,QAAUnH,EAC3DpK,EAAQiD,iBAAiB,mBAAoBmH,GAE7C/M,KAAKgG,UAAUrB,YAAYhC,GAE3B,IAAIT,EAAW,CACXS,QAASA,EACT2L,UAAW,WAEF3L,EAAQuO,YAAWvO,EAAQuO,UAAY,UAC5C,IAAIiD,EAAQ1R,SAAS2R,cACjBC,EAAYnV,OAAOoV,eACvBH,EAAMI,mBAAmB5R,GACzB0R,EAAUG,kBACVH,EAAUI,SAASN,GACnBxR,EAAQqK,SAOZX,OAAQ,WACJ1J,EAAQoR,aAAa,mBAAmB,IAE5CzB,QAAS,WACL3P,EAAQoR,aAAa,mBAAmB,IAO5C1F,sBAAuB,WACnB1L,EAAQ+R,gBAAgB,mBACxB/R,EAAQoR,aAAa,kBAAmB,QACxCpR,EAAQgS,OACRhS,EAAQqK,SAOZO,OAAQ,SAASzD,GACbnH,EAAQ4K,OAASzD,IAGzB5H,EAASoM,YACT9M,EAAO4G,GAAG,kBAAmBlG,EAASoM,WACtC9M,EAAO4G,GAAG,gBAAiBlG,EAASoM,WACpC9M,EAAO4G,GAAG,YAAY,WAElB5G,EAAO8Q,UACPsC,OAAO1S,SAASS,QAAQkS,cAAcC,YAAYF,OAAO1S,SAASS,SAClEiS,OAAOnO,OAAOsO,WAAWD,YAAYF,OAAOnO,OAAO+L,aAGvD,IAAIwC,EAAY,GAUhB,SAASjI,EAAiBvK,GAQtB,IAAIyS,EAPJzS,EAAE4P,GAAK,SAAS8C,GAEZ,IADA,IAAIC,EAAOD,EAAcpT,MAAM,KACtBhG,EAAI,EAAGA,EAAIqZ,EAAKnZ,OAAQF,IAC7B,GAAI6C,EAAIyT,GAAGpS,KAAMmV,EAAKrZ,IAAK,OAAO,EAEtC,OAAO,GAGX,IAAK,IAAIA,EAAI,EAAGA,EAAIkZ,EAAUhZ,OAAQF,IAGlC,GAFAmZ,EAAWD,EAAUlZ,IAEO,KAAxBmZ,EAASG,aAAsBH,EAASG,aAAenT,EAAIY,UAmB3DoS,EAAS7Y,KAAK,KAAMoG,GACpB,OAxCZN,EAASiQ,OAAS,SAAStP,EAAOoS,GACN,GAApBhL,UAAUjO,SACViZ,EAAWpS,EACXA,EAAQ,KAEZoS,EAASG,YAAcvS,EACvBmS,EAAU1Y,KAAK2Y,IAsCnBjV,KAAKkC,SAAWA,EAEpB,OAAO3E,EAAOD,QAAUuW,IAahCxU,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI8X,EAAShW,EAAGnB,EAAE,IAClB,SAASoX,KACT,SAASC,EAAW7R,GAEhB,IADA,IAAI8R,EAAO,EACF1Z,EAAI,EAAGA,EAAI4H,EAAI1H,OAAQF,IAC5B0Z,GAAQ9R,EAAI+R,WAAW3Z,GAE3B,OAAO0Z,EAGX,SAASnP,EAAMmB,GACX,IAAIkO,EAAY1V,KAAK2N,QAAkD,GAAzCzO,OAAOyW,SAASC,OAAO/T,QAAQ2F,GAC7D,GAAIkO,EAAW,CACX,IAAIG,EAAIN,EAAW/N,GAAQ,IACvBsO,EAAYT,EAAO,wHAA6IQ,GAChKE,EAAY,kCAChB/V,KAAKkK,IAAM,WACP,IAAI8L,EAASX,EAAO1Y,MAAM,KAAMsN,WAChCgM,QAAQ/L,IAAImL,EAAO,aAAc7N,EAAMwO,GAASF,EAAWC,SAG/D/V,KAAKkK,IAAMoL,EAGnB,OAAO/X,EAAOD,QAAU+I,IAKhChH,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,SAAS8X,EAAOa,EAAUC,GAItB,MAHmB,iBAARA,IACPA,EAAO,GAAG/W,MAAMhD,KAAK6N,UAAW,IAE7BuF,OAAO0G,GAAUnG,QAAQ,eAAe,SAASqG,EAAOC,GAC3D,OAAOF,EAAKE,IAASA,KAG7B,OAAO9Y,EAAOD,QAAU+X,IAahChW,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,KACxB,cAAekF,SAAS0L,cAAc,OAAS,iBAAkBjP,SACnEoX,YAAYpa,UAAUqa,iBAAiB,aAAa,WAChD,IAAoD7S,EAAK5H,EAArDuY,EAAYnV,OAAOoV,eAAgBkC,EAAS,GAEhD,IAAK1a,EAAI,EAAGA,EAAIuY,EAAUoC,WAAY3a,IAClC0a,EAAO1a,GAAKuY,EAAUqC,WAAW5a,GAYrC,IATAuY,EAAUG,kBAGVH,EAAUsC,kBAAkB3W,MAE5B0D,EAAM2Q,EAAUxE,WAEhBwE,EAAUG,kBAEL1Y,EAAI,EAAGA,EAAI0a,EAAOxa,OAAQF,IAC3BuY,EAAUI,SAAS+B,EAAO1a,IAI9B,OAAO4H,KAEX4S,YAAYpa,UAAU0a,iBAAiB,aAAa,SAASjW,GAMzDX,KAAKkR,WAAavQ,GAAQ,IAAIoP,QAAQ,KAAM,QAAQA,QAAQ,KAAM,QAAQA,QAAQ,MAAO,cAezG1Q,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC;;;;;;;AAO9B,IAAIsZ,EAAc,WACd,OAAI5a,OAAO6a,KAAa7a,OAAO6a,KACxB,SAAShZ,GACZ,IAAIgZ,EAAO,GACX,IAAK,IAAIhb,KAAKgC,EACNA,EAAE3B,eAAeL,IACjBgb,EAAKxa,KAAKR,GAGlB,OAAOgb,GATG,GAYlB,SAASC,EAAoBrT,GACzB,OAA0B,IAAtBA,EAAI7B,QAAQ,OAAqC,IAAtB6B,EAAI7B,QAAQ,KAAoB6B,EACxDA,EAAIqM,QAAQ,KAAM,MAAMA,QAAQ,MAAO,MAElD,SAASiH,EAAUC,GACf,MAAmB,kBAARA,EACAC,KAAKC,MAAMD,KAAKE,UAAUH,IAE1BA,EAIf,SAASI,EAAUC,EAAQL,EAAKM,EAASC,GAKrC,IAJA,IAAIC,EAAUZ,EAAYI,GACtBS,EAAUb,EAAYS,GAEtBK,GAAU,EACLrZ,EAAIoZ,EAAQ1b,OAAS,EAAGsC,GAAK,EAAGA,IAAK,CAC1C,IAAIK,EAAM+Y,EAAQpZ,GACdsZ,EAASN,EAAO3Y,GACpB,GAAIsY,EAAI9a,eAAewC,GAAM,CACzB,IAAIkZ,EAASZ,EAAItY,GACI,iBAAViZ,GAAgC,MAAVA,GAAmC,iBAAVC,GAAgC,MAAVA,EAC5ER,EAAUO,EAAQC,EAAQN,EAASC,EAAO,IAAMT,EAAoBpY,IAEhEiZ,GAAUC,KACA,EACVN,EAAQjb,KAAK,CACTwb,GAAI,UACJN,KAAMA,EAAO,IAAMT,EAAoBpY,GACvCN,MAAO2Y,EAAUa,WAK7BN,EAAQjb,KAAK,CACTwb,GAAI,SACJN,KAAMA,EAAO,IAAMT,EAAoBpY,KAE3CgZ,GAAU,EAGlB,GAAKA,GAAWF,EAAQzb,QAAU0b,EAAQ1b,OAG1C,IAASsC,EAAI,EAAGA,EAAImZ,EAAQzb,OAAQsC,IAAK,CACjCK,EAAM8Y,EAAQnZ,GACbgZ,EAAOnb,eAAewC,IACvB4Y,EAAQjb,KAAK,CACTwb,GAAI,MACJN,KAAMA,EAAO,IAAMT,EAAoBpY,GACvCN,MAAO2Y,EAAUC,EAAItY,OAKrC,SAASoZ,EAAQC,EAAOC,GACpB,IAAIV,EAAU,GAEd,OADAF,EAAUW,EAAOC,EAAOV,EAAS,IAC1BA,EAEX,OAAOha,EAAOD,QAAUya,IAKhC1Y,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI2a,EAAS7Y,EAAGnB,EAAE,IACdia,EAAY,KACZC,EAAW,KACXC,EAAa,MACjB,SAAS7C,EAAK8C,GACV,MAAsB,iBAAXA,EACAC,EAAkBD,GAEtBE,EAAaF,GAExB,SAASlG,EAAGjP,EAAGC,GACX,OAAOD,GAAKC,GAAKoS,EAAKrS,IAAMqS,EAAKpS,GAIrC,SAASoV,EAAaC,GAClB,IAAIC,EAAW,EAWf,IAVID,EAAS5G,SAAW4G,EAAS3G,WAC7B4G,GAAYP,GAEZM,EAAS1G,SACT2G,GAAYN,GAEZK,EAASE,WACTD,GAAYL,IAGsC,IAAlD,CAAE,GAAI,GAAI,GAAI,IAAKxW,QAAQ4W,EAASzG,SAAiB,CAQrD,GAAyB,MAArByG,EAASzG,SAAmByG,EAASG,cACrC,OAAOF,EAAY9E,SAAS6E,EAASG,cAAcC,OAAO,GAAI,IAElEH,GAAYD,EAASzG,QAEzB,OAAO0G,EAEX,SAASH,EAAkBrD,GACvB,IAAIwD,EAAW,EAoBf,OAnBAxD,EAAc4D,cAAchX,MAAM,YAAYyC,SAAQ,SAAS3G,GAC3D,OAAQA,GACN,IAAK,OACL,IAAK,MACH8a,GAAYP,EACZ,MAEF,IAAK,MACHO,GAAYN,EACZ,MAEF,IAAK,QACHM,GAAYL,EACZ,MAEF,QACEK,GAAYR,EAAOta,OAGpB8a,EAlDXpb,EAAQkY,KAAOA,EACflY,EAAQ8U,GAAKA,IAuDrB/S,EAAG,IAAM,CACLhB,MAAO,SAASqB,EAASpC,EAASC,GAC9B,IAAI2a,EAAS,CACTa,MAAO,GACPC,QAAS,GACTC,IAAK,GACLC,SAAU,GACVC,UAAW,EACXC,IAAK,EACLC,MAAO,GACPC,IAAK,GACLC,MAAO,GACPC,OAAQ,GACRC,SAAU,GACVC,IAAK,GACLC,KAAM,GACNC,OAAQ,GACRC,KAAM,GACNC,GAAI,GACJC,MAAO,GACPC,KAAM,GACNC,UAAW,CACPC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,GAERC,IAAK,GACLC,QAAS,IACTC,IAAK,GACLC,MAAO,IACPC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,IAAK,IACLC,IAAK,IACLC,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,KAGT,IAAK,IAAI1c,KAAOuZ,EACRA,EAAO/b,eAAewC,KACtBuZ,EAAOvZ,EAAIma,eAAiBZ,EAAOvZ,IAG3C,IAAI2c,EAAW,GACXC,EAAY,IAAI9F,WAAW,GAE/B,6BAA6B3T,MAAM,IAAIyC,SAAQ,SAASiX,GACpDtD,EAAOsD,GAAUF,GAAYE,EAAO/F,WAAW,GAAK8F,MAGxD,IAAI1c,EAAI,EACR,GACIqZ,EAAOrZ,EAAEgR,YAAchR,EAAI,WACpBA,GACXtB,EAAOD,QAAU4a,IAIzB,IAAIuD,EAAgB,CAChB,gBAAiB,GAGrB,SAASC,EAAI9d,GACTyB,EAAGnB,EAAE,CAAEud,EAAc7d,KAEzB8d,EAAI,kBAtgEJ,I,yDCTIC,EAAS,WAAa,IAAIC,EAAI5b,KAAS6b,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,aAAa,CAACE,MAAM,CAAC,WAAaL,EAAIM,YAAY9T,GAAG,CAAC,OAASwT,EAAIO,iBAAiB,IAClNC,EAAkB,GCMP,GACbxe,KAAM,MACN,OACE,MAAO,CACLse,WAAY,CACR,KAAQ,CACN,GAAM,EACN,KAAQ,iBACR,MAAS,wEACT,UAAa,CAAE,MAAS,IAAK,OAAU,MAEzC,SAAY,CACR,CACI,KAAQ,CAAE,KAAQ,WAAY,SAAY,EAAG,GAAM,GACnD,SAAY,CACR,CACE,KAAQ,CAAE,KAAQ,WAAY,GAAM,GACpC,SAAY,CACV,CAAE,KAAQ,CAAE,KAAQ,WAAY,GAAM,IACtC,CAAE,KAAQ,CAAE,KAAQ,WAAY,GAAM,IACtC,CAAE,KAAQ,CAAE,KAAQ,WAAY,GAAM,MAG1C,CAAE,KAAQ,CAAE,KAAQ,WAAY,GAAM,IACtC,CAAE,KAAQ,CAAE,KAAQ,WAAY,GAAM,KACtC,CAAE,KAAQ,CAAE,KAAQ,WAAY,GAAM,KACtC,CAAE,KAAQ,CAAE,KAAQ,WAAY,GAAM,OAG9C,CAAE,KAAQ,CAAE,KAAQ,WAAY,SAAY,EAAG,GAAM,IACrD,CAAE,KAAQ,CAAE,KAAQ,WAAY,SAAY,EAAG,GAAM,MACrD,CAAE,KAAQ,CAAE,KAAQ,WAAY,SAAY,EAAG,GAAM,MACrD,CAAE,KAAQ,CAAE,KAAQ,WAAY,SAAY,EAAG,GAAM,UAKjE,YAEAG,QAAS,CACP,aAAcC,GACZrG,QAAQ/L,IAAIoS,MChDoK,I,wBCQlLC,EAAY,eACd,EACAZ,EACAS,GACA,EACA,KACA,KACA,MAIa,EAAAG,E,QCnBX,EAAS,WAAa,IAAIX,EAAI5b,KAAS6b,EAAGD,EAAIE,eAAsBF,EAAII,MAAMD,GAAO,OAAOH,EAAIY,GAAG,IACnG,EAAkB,CAAC,WAAa,IAAIZ,EAAI5b,KAAS6b,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACU,YAAY,UAAU,CAACV,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,0BCalJ,G,sEAAA,CACbre,KAAM,aACN,OACE,MAAO,CACL4D,OAAQ,KAGZkb,MAAO,CACLR,WAAY,CACVhb,KAAMjF,OACN0gB,QAAS,IAAM,KAGnB,UACE3c,KAAKF,SAAW,IAAIZ,OAAOe,WAAWC,OAAOuC,SAASwD,cAAc,sBACpEjG,KAAKwB,OAASxB,KAAKF,SAAS0B,OAC5BxB,KAAKwB,OAAO0a,WAAWlc,KAAKkc,YAC5Blc,KAAK4c,MAAM,SAAU5c,KAAKwB,WC/BuK,ICQjM,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,OAIa,I,QCjBf,EAAWqb,QAAU,SAAUC,GAC7BA,EAAIP,UAAU,EAAW3e,KAAM,IAGlB,IAAAmf,EAAA,ECHf,OAAIrB,IAAIqB,GAER,OAAIC,OAAOC,eAAgB,EAE3B,IAAI,OAAI,CACNtB,OAAQ9F,GAAKA,EAAEqH,KACdC,OAAO,S,kCCTV,yBAA+d,EAAG,G","file":"js/index.348ce06f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","/*!\n * ====================================================\n * kityminder-editor - v1.0.67 - 2020-03-04\n * https://github.com/fex-team/kityminder-editor\n * GitHub: https://github.com/fex-team/kityminder-editor \n * Copyright (c) 2020 ; Licensed \n * ====================================================\n */\n/* eslint-disable */\n(function () {\nvar _p = {\n    r: function(index) {\n        if (_p[index].inited) {\n            return _p[index].value;\n        }\n        if (typeof _p[index].value === \"function\") {\n            var module = {\n                exports: {}\n            }, returnValue = _p[index].value(null, module.exports, module);\n            _p[index].inited = true;\n            _p[index].value = returnValue;\n            if (returnValue !== undefined) {\n                return returnValue;\n            } else {\n                for (var key in module.exports) {\n                    if (module.exports.hasOwnProperty(key)) {\n                        _p[index].inited = true;\n                        _p[index].value = module.exports;\n                        return module.exports;\n                    }\n                }\n            }\n        } else {\n            _p[index].inited = true;\n            return _p[index].value;\n        }\n    }\n};\n\n//src/editor.js\n_p[0] = {\n    value: function(require, exports, module) {\n        /**\n     * 运行时\n     */\n        var runtimes = [];\n        function assemble(runtime) {\n            runtimes.push(runtime);\n        }\n        function KMEditor(selector) {\n            this.selector = selector;\n            for (var i = 0; i < runtimes.length; i++) {\n                if (typeof runtimes[i] == \"function\") {\n                    runtimes[i].call(this, this);\n                }\n            }\n        }\n        KMEditor.assemble = assemble;\n        assemble(_p.r(7));\n        assemble(_p.r(9));\n        assemble(_p.r(14));\n        assemble(_p.r(18));\n        assemble(_p.r(11));\n        assemble(_p.r(12));\n        assemble(_p.r(5));\n        assemble(_p.r(6));\n        assemble(_p.r(8));\n        assemble(_p.r(15));\n        assemble(_p.r(10));\n        assemble(_p.r(13));\n        assemble(_p.r(16));\n        assemble(_p.r(17));\n        return module.exports = KMEditor;\n    }\n};\n\n//src/expose-editor.js\n/**\n * @fileOverview\n *\n * 打包暴露\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[1] = {\n    value: function(require, exports, module) {\n        return module.exports = kityminder.Editor = _p.r(0);\n    }\n};\n\n//src/hotbox.js\n_p[2] = {\n    value: function(require, exports, module) {\n        return module.exports = window.HotBox;\n    }\n};\n\n//src/lang.js\n_p[3] = {\n    value: function(require, exports, module) {}\n};\n\n//src/minder.js\n_p[4] = {\n    value: function(require, exports, module) {\n        return module.exports = window.kityminder.Minder;\n    }\n};\n\n//src/runtime/clipboard-mimetype.js\n/**\n * @Desc: 新增一个用于处理系统ctrl+c ctrl+v等方式导入导出节点的MIMETYPE处理，如系统不支持clipboardEvent或者是FF则不初始化改class\n * @Editor: Naixor\n * @Date: 2015.9.21\n */\n_p[5] = {\n    value: function(require, exports, module) {\n        function MimeType() {\n            /**\n\t\t * 私有变量\n\t\t */\n            var SPLITOR = \"\\ufeff\";\n            var MIMETYPE = {\n                \"application/km\": \"￿\"\n            };\n            var SIGN = {\n                \"\\ufeff\": \"SPLITOR\",\n                \"￿\": \"application/km\"\n            };\n            /**\n\t\t * 用于将一段纯文本封装成符合其数据格式的文本\n\t\t * @method process \t\t\tprivate\n\t\t * @param  {MIMETYPE} mimetype 数据格式\n\t\t * @param  {String} text     原始文本\n\t\t * @return {String}          符合该数据格式下的文本\n\t\t * @example\n\t\t * \t\t\tvar str = \"123\";\n\t\t * \t\t\tstr = process('application/km', str); // 返回的内容再经过MimeType判断会读取出其数据格式为application/km\n\t\t * \t\t\tprocess('text/plain', str); // 若接受到一个非纯文本信息，则会将其转换为新的数据格式\n\t\t */\n            function process(mimetype, text) {\n                if (!this.isPureText(text)) {\n                    var _mimetype = this.whichMimeType(text);\n                    if (!_mimetype) {\n                        throw new Error(\"unknow mimetype!\");\n                    }\n                    text = this.getPureText(text);\n                }\n                if (mimetype === false) {\n                    return text;\n                }\n                return mimetype + SPLITOR + text;\n            }\n            /**\n\t\t * 注册数据类型的标识\n\t\t * @method registMimeTypeProtocol  \tpublic\n\t\t * @param  {String} type 数据类型\n\t\t * @param  {String} sign 标识\n\t\t */\n            this.registMimeTypeProtocol = function(type, sign) {\n                if (sign && SIGN[sign]) {\n                    throw new Error(\"sing has registed!\");\n                }\n                if (type && !!MIMETYPE[type]) {\n                    throw new Error(\"mimetype has registed!\");\n                }\n                SIGN[sign] = type;\n                MIMETYPE[type] = sign;\n            };\n            /**\n\t\t * 获取已注册数据类型的协议\n\t\t * @method getMimeTypeProtocol  \tpublic\n\t\t * @param  {String} type 数据类型\n\t\t * @param  {String} text|undefiend  文本内容或不传入\n\t\t * @return {String|Function} \n\t\t * @example \n\t\t * \t\t\ttext若不传入则直接返回对应数据格式的处理(process)方法\n\t\t * \t\t\t若传入文本则直接调用对应的process方法进行处理，此时返回处理后的内容\n\t\t * \t\t\tvar m = new MimeType();\n\t\t * \t\t\tvar kmprocess = m.getMimeTypeProtocol('application/km');\n\t\t * \t\t\tkmprocess(\"123\") === m.getMimeTypeProtocol('application/km', \"123\");\n\t\t * \t\t\t\n\t\t */\n            this.getMimeTypeProtocol = function(type, text) {\n                var mimetype = MIMETYPE[type] || false;\n                if (text === undefined) {\n                    return process.bind(this, mimetype);\n                }\n                return process(mimetype, text);\n            };\n            this.getSpitor = function() {\n                return SPLITOR;\n            };\n            this.getMimeType = function(sign) {\n                if (sign !== undefined) {\n                    return SIGN[sign] || null;\n                }\n                return MIMETYPE;\n            };\n        }\n        MimeType.prototype.isPureText = function(text) {\n            return !~text.indexOf(this.getSpitor());\n        };\n        MimeType.prototype.getPureText = function(text) {\n            if (this.isPureText(text)) {\n                return text;\n            }\n            return text.split(this.getSpitor())[1];\n        };\n        MimeType.prototype.whichMimeType = function(text) {\n            if (this.isPureText(text)) {\n                return null;\n            }\n            return this.getMimeType(text.split(this.getSpitor())[0]);\n        };\n        function MimeTypeRuntime() {\n            if (this.minder.supportClipboardEvent && !kity.Browser.gecko) {\n                this.MimeType = new MimeType();\n            }\n        }\n        return module.exports = MimeTypeRuntime;\n    }\n};\n\n//src/runtime/clipboard.js\n/**\n * @Desc: 处理editor的clipboard事件，只在支持ClipboardEvent并且不是FF的情况下工作\n * @Editor: Naixor\n * @Date: 2015.9.21\n */\n_p[6] = {\n    value: function(require, exports, module) {\n        function ClipboardRuntime() {\n            var minder = this.minder;\n            var Data = window.kityminder.data;\n            if (!minder.supportClipboardEvent || kity.Browser.gecko) {\n                return;\n            }\n            var fsm = this.fsm;\n            var receiver = this.receiver;\n            var MimeType = this.MimeType;\n            var kmencode = MimeType.getMimeTypeProtocol(\"application/km\"), decode = Data.getRegisterProtocol(\"json\").decode;\n            var _selectedNodes = [];\n            /*\n\t\t * 增加对多节点赋值粘贴的处理\n\t\t */\n            function encode(nodes) {\n                var _nodes = [];\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    _nodes.push(minder.exportNode(nodes[i]));\n                }\n                return kmencode(Data.getRegisterProtocol(\"json\").encode(_nodes));\n            }\n            var beforeCopy = function(e) {\n                if (document.activeElement == receiver.element) {\n                    var clipBoardEvent = e;\n                    var state = fsm.state();\n                    switch (state) {\n                      case \"input\":\n                        {\n                            break;\n                        }\n\n                      case \"normal\":\n                        {\n                            var nodes = [].concat(minder.getSelectedNodes());\n                            if (nodes.length) {\n                                // 这里由于被粘贴复制的节点的id信息也都一样，故做此算法\n                                // 这里有个疑问，使用node.getParent()或者node.parent会离奇导致出现非选中节点被渲染成选中节点，因此使用isAncestorOf，而没有使用自行回溯的方式\n                                if (nodes.length > 1) {\n                                    var targetLevel;\n                                    nodes.sort(function(a, b) {\n                                        return a.getLevel() - b.getLevel();\n                                    });\n                                    targetLevel = nodes[0].getLevel();\n                                    if (targetLevel !== nodes[nodes.length - 1].getLevel()) {\n                                        var plevel, pnode, idx = 0, l = nodes.length, pidx = l - 1;\n                                        pnode = nodes[pidx];\n                                        while (pnode.getLevel() !== targetLevel) {\n                                            idx = 0;\n                                            while (idx < l && nodes[idx].getLevel() === targetLevel) {\n                                                if (nodes[idx].isAncestorOf(pnode)) {\n                                                    nodes.splice(pidx, 1);\n                                                    break;\n                                                }\n                                                idx++;\n                                            }\n                                            pidx--;\n                                            pnode = nodes[pidx];\n                                        }\n                                    }\n                                }\n                                var str = encode(nodes);\n                                clipBoardEvent.clipboardData.setData(\"text/plain\", str);\n                            }\n                            e.preventDefault();\n                            break;\n                        }\n                    }\n                }\n            };\n            var beforeCut = function(e) {\n                if (document.activeElement == receiver.element) {\n                    if (minder.getStatus() !== \"normal\") {\n                        e.preventDefault();\n                        return;\n                    }\n                    var clipBoardEvent = e;\n                    var state = fsm.state();\n                    switch (state) {\n                      case \"input\":\n                        {\n                            break;\n                        }\n\n                      case \"normal\":\n                        {\n                            var nodes = minder.getSelectedNodes();\n                            if (nodes.length) {\n                                clipBoardEvent.clipboardData.setData(\"text/plain\", encode(nodes));\n                                minder.execCommand(\"removenode\");\n                            }\n                            e.preventDefault();\n                            break;\n                        }\n                    }\n                }\n            };\n            var beforePaste = function(e) {\n                if (document.activeElement == receiver.element) {\n                    if (minder.getStatus() !== \"normal\") {\n                        e.preventDefault();\n                        return;\n                    }\n                    var clipBoardEvent = e;\n                    var state = fsm.state();\n                    var textData = clipBoardEvent.clipboardData.getData(\"text/plain\");\n                    switch (state) {\n                      case \"input\":\n                        {\n                            // input状态下如果格式为application/km则不进行paste操作\n                            if (!MimeType.isPureText(textData)) {\n                                e.preventDefault();\n                                return;\n                            }\n                            break;\n                        }\n\n                      case \"normal\":\n                        {\n                            /*\n\t\t\t\t\t\t * 针对normal状态下通过对选中节点粘贴导入子节点文本进行单独处理\n\t\t\t\t\t\t */\n                            var sNodes = minder.getSelectedNodes();\n                            if (MimeType.whichMimeType(textData) === \"application/km\") {\n                                var nodes = decode(MimeType.getPureText(textData));\n                                var _node;\n                                sNodes.forEach(function(node) {\n                                    // 由于粘贴逻辑中为了排除子节点重新排序导致逆序，因此复制的时候倒过来\n                                    for (var i = nodes.length - 1; i >= 0; i--) {\n                                        _node = minder.createNode(null, node);\n                                        minder.importNode(_node, nodes[i]);\n                                        _selectedNodes.push(_node);\n                                        node.appendChild(_node);\n                                    }\n                                });\n                                minder.select(_selectedNodes, true);\n                                _selectedNodes = [];\n                                minder.refresh();\n                            } else if (clipBoardEvent.clipboardData && clipBoardEvent.clipboardData.items[0].type.indexOf(\"image\") > -1) {\n                                var imageFile = clipBoardEvent.clipboardData.items[0].getAsFile();\n                                var serverService = angular.element(document.body).injector().get(\"server\");\n                                return serverService.uploadImage(imageFile).then(function(json) {\n                                    var resp = json.data;\n                                    if (resp.errno === 0) {\n                                        minder.execCommand(\"image\", resp.data.url);\n                                    }\n                                });\n                            } else {\n                                sNodes.forEach(function(node) {\n                                    minder.Text2Children(node, textData);\n                                });\n                            }\n                            e.preventDefault();\n                            break;\n                        }\n                    }\n                }\n            };\n            /**\n\t\t * 由editor的receiver统一处理全部事件，包括clipboard事件\n\t\t * @Editor: Naixor\n\t\t * @Date: 2015.9.24\n\t\t */\n            document.addEventListener(\"copy\", beforeCopy);\n            document.addEventListener(\"cut\", beforeCut);\n            document.addEventListener(\"paste\", beforePaste);\n        }\n        return module.exports = ClipboardRuntime;\n    }\n};\n\n//src/runtime/container.js\n/**\n * @fileOverview\n *\n * 初始化编辑器的容器\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[7] = {\n    value: function(require, exports, module) {\n        /**\n     * 最先执行的 Runtime，初始化编辑器容器\n     */\n        function ContainerRuntime() {\n            var container;\n            if (typeof this.selector == \"string\") {\n                container = document.querySelector(this.selector);\n            } else {\n                container = this.selector;\n            }\n            if (!container) throw new Error(\"Invalid selector: \" + this.selector);\n            // 这个类名用于给编辑器添加样式\n            container.classList.add(\"km-editor\");\n            // 暴露容器给其他运行时使用\n            this.container = container;\n        }\n        return module.exports = ContainerRuntime;\n    }\n};\n\n//src/runtime/drag.js\n/**\n * @fileOverview\n *\n * 用于拖拽节点时屏蔽键盘事件\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[8] = {\n    value: function(require, exports, module) {\n        var Hotbox = _p.r(2);\n        var Debug = _p.r(19);\n        var debug = new Debug(\"drag\");\n        function DragRuntime() {\n            var fsm = this.fsm;\n            var minder = this.minder;\n            var hotbox = this.hotbox;\n            var receiver = this.receiver;\n            var receiverElement = receiver.element;\n            // setup everything to go\n            setupFsm();\n            // listen the fsm changes, make action.\n            function setupFsm() {\n                // when jumped to drag mode, enter\n                fsm.when(\"* -> drag\", function() {});\n                fsm.when(\"drag -> *\", function(exit, enter, reason) {\n                    if (reason == \"drag-finish\") {}\n                });\n            }\n            var downX, downY;\n            var MOUSE_HAS_DOWN = 0;\n            var MOUSE_HAS_UP = 1;\n            var BOUND_CHECK = 20;\n            var flag = MOUSE_HAS_UP;\n            var maxX, maxY, osx, osy, containerY;\n            var freeHorizen = false, freeVirtical = false;\n            var frame;\n            function move(direction, speed) {\n                if (!direction) {\n                    freeHorizen = freeVirtical = false;\n                    frame && kity.releaseFrame(frame);\n                    frame = null;\n                    return;\n                }\n                if (!frame) {\n                    frame = kity.requestFrame(function(direction, speed, minder) {\n                        return function(frame) {\n                            switch (direction) {\n                              case \"left\":\n                                minder._viewDragger.move({\n                                    x: -speed,\n                                    y: 0\n                                }, 0);\n                                break;\n\n                              case \"top\":\n                                minder._viewDragger.move({\n                                    x: 0,\n                                    y: -speed\n                                }, 0);\n                                break;\n\n                              case \"right\":\n                                minder._viewDragger.move({\n                                    x: speed,\n                                    y: 0\n                                }, 0);\n                                break;\n\n                              case \"bottom\":\n                                minder._viewDragger.move({\n                                    x: 0,\n                                    y: speed\n                                }, 0);\n                                break;\n\n                              default:\n                                return;\n                            }\n                            frame.next();\n                        };\n                    }(direction, speed, minder));\n                }\n            }\n            minder.on(\"mousedown\", function(e) {\n                flag = MOUSE_HAS_DOWN;\n                var rect = minder.getPaper().container.getBoundingClientRect();\n                downX = e.originEvent.clientX;\n                downY = e.originEvent.clientY;\n                containerY = rect.top;\n                maxX = rect.width;\n                maxY = rect.height;\n            });\n            minder.on(\"mousemove\", function(e) {\n                if (fsm.state() === \"drag\" && flag == MOUSE_HAS_DOWN && minder.getSelectedNode() && (Math.abs(downX - e.originEvent.clientX) > BOUND_CHECK || Math.abs(downY - e.originEvent.clientY) > BOUND_CHECK)) {\n                    osx = e.originEvent.clientX;\n                    osy = e.originEvent.clientY - containerY;\n                    if (osx < BOUND_CHECK) {\n                        move(\"right\", BOUND_CHECK - osx);\n                    } else if (osx > maxX - BOUND_CHECK) {\n                        move(\"left\", BOUND_CHECK + osx - maxX);\n                    } else {\n                        freeHorizen = true;\n                    }\n                    if (osy < BOUND_CHECK) {\n                        move(\"bottom\", osy);\n                    } else if (osy > maxY - BOUND_CHECK) {\n                        move(\"top\", BOUND_CHECK + osy - maxY);\n                    } else {\n                        freeVirtical = true;\n                    }\n                    if (freeHorizen && freeVirtical) {\n                        move(false);\n                    }\n                }\n                if (fsm.state() !== \"drag\" && flag === MOUSE_HAS_DOWN && minder.getSelectedNode() && (Math.abs(downX - e.originEvent.clientX) > BOUND_CHECK || Math.abs(downY - e.originEvent.clientY) > BOUND_CHECK)) {\n                    if (fsm.state() === \"hotbox\") {\n                        hotbox.active(Hotbox.STATE_IDLE);\n                    }\n                    return fsm.jump(\"drag\", \"user-drag\");\n                }\n            });\n            window.addEventListener(\"mouseup\", function() {\n                flag = MOUSE_HAS_UP;\n                if (fsm.state() === \"drag\") {\n                    move(false);\n                    return fsm.jump(\"normal\", \"drag-finish\");\n                }\n            }, false);\n        }\n        return module.exports = DragRuntime;\n    }\n};\n\n//src/runtime/fsm.js\n/**\n * @fileOverview\n *\n * 编辑器状态机\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[9] = {\n    value: function(require, exports, module) {\n        var Debug = _p.r(19);\n        var debug = new Debug(\"fsm\");\n        function handlerConditionMatch(condition, when, exit, enter) {\n            if (condition.when != when) return false;\n            if (condition.enter != \"*\" && condition.enter != enter) return false;\n            if (condition.exit != \"*\" && condition.exit != exit) return;\n            return true;\n        }\n        function FSM(defaultState) {\n            var currentState = defaultState;\n            var BEFORE_ARROW = \" - \";\n            var AFTER_ARROW = \" -> \";\n            var handlers = [];\n            /**\n         * 状态跳转\n         *\n         * 会通知所有的状态跳转监视器\n         *\n         * @param  {string} newState  新状态名称\n         * @param  {any} reason 跳转的原因，可以作为参数传递给跳转监视器\n         */\n            this.jump = function(newState, reason) {\n                if (!reason) throw new Error(\"Please tell fsm the reason to jump\");\n                var oldState = currentState;\n                var notify = [ oldState, newState ].concat([].slice.call(arguments, 1));\n                var i, handler;\n                // 跳转前\n                for (i = 0; i < handlers.length; i++) {\n                    handler = handlers[i];\n                    if (handlerConditionMatch(handler.condition, \"before\", oldState, newState)) {\n                        if (handler.apply(null, notify)) return;\n                    }\n                }\n                currentState = newState;\n                debug.log(\"[{0}] {1} -> {2}\", reason, oldState, newState);\n                // 跳转后\n                for (i = 0; i < handlers.length; i++) {\n                    handler = handlers[i];\n                    if (handlerConditionMatch(handler.condition, \"after\", oldState, newState)) {\n                        handler.apply(null, notify);\n                    }\n                }\n                return currentState;\n            };\n            /**\n         * 返回当前状态\n         * @return {string}\n         */\n            this.state = function() {\n                return currentState;\n            };\n            /**\n         * 添加状态跳转监视器\n         * \n         * @param {string} condition\n         *     监视的时机\n         *         \"* => *\" （默认）\n         *\n         * @param  {Function} handler\n         *     监视函数，当状态跳转的时候，会接收三个参数\n         *         * from - 跳转前的状态\n         *         * to - 跳转后的状态\n         *         * reason - 跳转的原因\n         */\n            this.when = function(condition, handler) {\n                if (arguments.length == 1) {\n                    handler = condition;\n                    condition = \"* -> *\";\n                }\n                var when, resolved, exit, enter;\n                resolved = condition.split(BEFORE_ARROW);\n                if (resolved.length == 2) {\n                    when = \"before\";\n                } else {\n                    resolved = condition.split(AFTER_ARROW);\n                    if (resolved.length == 2) {\n                        when = \"after\";\n                    }\n                }\n                if (!when) throw new Error(\"Illegal fsm condition: \" + condition);\n                exit = resolved[0];\n                enter = resolved[1];\n                handler.condition = {\n                    when: when,\n                    exit: exit,\n                    enter: enter\n                };\n                handlers.push(handler);\n            };\n        }\n        function FSMRumtime() {\n            this.fsm = new FSM(\"normal\");\n        }\n        return module.exports = FSMRumtime;\n    }\n};\n\n//src/runtime/history.js\n/**\n * @fileOverview\n *\n * 历史管理\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[10] = {\n    value: function(require, exports, module) {\n        var jsonDiff = _p.r(22);\n        function HistoryRuntime() {\n            var minder = this.minder;\n            var hotbox = this.hotbox;\n            var MAX_HISTORY = 100;\n            var lastSnap;\n            var patchLock;\n            var undoDiffs;\n            var redoDiffs;\n            function reset() {\n                undoDiffs = [];\n                redoDiffs = [];\n                lastSnap = minder.exportJson();\n            }\n            function makeUndoDiff() {\n                var headSnap = minder.exportJson();\n                var diff = jsonDiff(headSnap, lastSnap);\n                if (diff.length) {\n                    undoDiffs.push(diff);\n                    while (undoDiffs.length > MAX_HISTORY) {\n                        undoDiffs.shift();\n                    }\n                    lastSnap = headSnap;\n                    return true;\n                }\n            }\n            function makeRedoDiff() {\n                var revertSnap = minder.exportJson();\n                redoDiffs.push(jsonDiff(revertSnap, lastSnap));\n                lastSnap = revertSnap;\n            }\n            function undo() {\n                patchLock = true;\n                var undoDiff = undoDiffs.pop();\n                if (undoDiff) {\n                    minder.applyPatches(undoDiff);\n                    makeRedoDiff();\n                }\n                patchLock = false;\n            }\n            function redo() {\n                patchLock = true;\n                var redoDiff = redoDiffs.pop();\n                if (redoDiff) {\n                    minder.applyPatches(redoDiff);\n                    makeUndoDiff();\n                }\n                patchLock = false;\n            }\n            function changed() {\n                if (patchLock) return;\n                if (makeUndoDiff()) redoDiffs = [];\n            }\n            function hasUndo() {\n                return !!undoDiffs.length;\n            }\n            function hasRedo() {\n                return !!redoDiffs.length;\n            }\n            function updateSelection(e) {\n                if (!patchLock) return;\n                var patch = e.patch;\n                switch (patch.express) {\n                  case \"node.add\":\n                    minder.select(patch.node.getChild(patch.index), true);\n                    break;\n\n                  case \"node.remove\":\n                  case \"data.replace\":\n                  case \"data.remove\":\n                  case \"data.add\":\n                    minder.select(patch.node, true);\n                    break;\n                }\n            }\n            this.history = {\n                reset: reset,\n                undo: undo,\n                redo: redo,\n                hasUndo: hasUndo,\n                hasRedo: hasRedo\n            };\n            reset();\n            minder.on(\"contentchange\", changed);\n            minder.on(\"import\", reset);\n            minder.on(\"patch\", updateSelection);\n            var main = hotbox.state(\"main\");\n            main.button({\n                position: \"top\",\n                label: \"撤销\",\n                key: \"Ctrl + Z\",\n                enable: hasUndo,\n                action: undo,\n                next: \"idle\"\n            });\n            main.button({\n                position: \"top\",\n                label: \"重做\",\n                key: \"Ctrl + Y\",\n                enable: hasRedo,\n                action: redo,\n                next: \"idle\"\n            });\n        }\n        window.diff = jsonDiff;\n        return module.exports = HistoryRuntime;\n    }\n};\n\n//src/runtime/hotbox.js\n/**\n * @fileOverview\n *\n * 热盒 Runtime\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[11] = {\n    value: function(require, exports, module) {\n        var Hotbox = _p.r(2);\n        function HotboxRuntime() {\n            var fsm = this.fsm;\n            var minder = this.minder;\n            var receiver = this.receiver;\n            var container = this.container;\n            var hotbox = new Hotbox(container);\n            hotbox.setParentFSM(fsm);\n            fsm.when(\"normal -> hotbox\", function(exit, enter, reason) {\n                var node = minder.getSelectedNode();\n                var position;\n                if (node) {\n                    var box = node.getRenderBox();\n                    position = {\n                        x: box.cx,\n                        y: box.cy\n                    };\n                }\n                hotbox.active(\"main\", position);\n            });\n            fsm.when(\"normal -> normal\", function(exit, enter, reason, e) {\n                if (reason == \"shortcut-handle\") {\n                    var handleResult = hotbox.dispatch(e);\n                    if (handleResult) {\n                        e.preventDefault();\n                    } else {\n                        minder.dispatchKeyEvent(e);\n                    }\n                }\n            });\n            fsm.when(\"modal -> normal\", function(exit, enter, reason, e) {\n                if (reason == \"import-text-finish\") {\n                    receiver.element.focus();\n                }\n            });\n            this.hotbox = hotbox;\n        }\n        return module.exports = HotboxRuntime;\n    }\n};\n\n//src/runtime/input.js\n/**\n * @fileOverview\n *\n * 文本输入支持\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[12] = {\n    value: function(require, exports, module) {\n        _p.r(21);\n        var Debug = _p.r(19);\n        var debug = new Debug(\"input\");\n        function InputRuntime() {\n            var fsm = this.fsm;\n            var minder = this.minder;\n            var hotbox = this.hotbox;\n            var receiver = this.receiver;\n            var receiverElement = receiver.element;\n            var isGecko = window.kity.Browser.gecko;\n            // setup everything to go\n            setupReciverElement();\n            setupFsm();\n            setupHotbox();\n            // expose editText()\n            this.editText = editText;\n            // listen the fsm changes, make action.\n            function setupFsm() {\n                // when jumped to input mode, enter\n                fsm.when(\"* -> input\", enterInputMode);\n                // when exited, commit or exit depends on the exit reason\n                fsm.when(\"input -> *\", function(exit, enter, reason) {\n                    switch (reason) {\n                      case \"input-cancel\":\n                        return exitInputMode();\n\n                      case \"input-commit\":\n                      default:\n                        return commitInputResult();\n                    }\n                });\n                // lost focus to commit\n                receiver.onblur(function(e) {\n                    if (fsm.state() == \"input\") {\n                        fsm.jump(\"normal\", \"input-commit\");\n                    }\n                });\n                minder.on(\"beforemousedown\", function() {\n                    if (fsm.state() == \"input\") {\n                        fsm.jump(\"normal\", \"input-commit\");\n                    }\n                });\n                minder.on(\"dblclick\", function() {\n                    if (minder.getSelectedNode() && minder._status !== \"readonly\") {\n                        editText();\n                    }\n                });\n            }\n            // let the receiver follow the current selected node position\n            function setupReciverElement() {\n                if (debug.flaged) {\n                    receiverElement.classList.add(\"debug\");\n                }\n                receiverElement.onmousedown = function(e) {\n                    e.stopPropagation();\n                };\n                minder.on(\"layoutallfinish viewchange viewchanged selectionchange\", function(e) {\n                    // viewchange event is too frequenced, lazy it\n                    if (e.type == \"viewchange\" && fsm.state() != \"input\") return;\n                    updatePosition();\n                });\n                updatePosition();\n            }\n            // edit entrance in hotbox\n            function setupHotbox() {\n                hotbox.state(\"main\").button({\n                    position: \"center\",\n                    label: \"编辑\",\n                    key: \"F2\",\n                    enable: function() {\n                        return minder.queryCommandState(\"text\") != -1;\n                    },\n                    action: editText\n                });\n            }\n            /**\n         * 增加对字体的鉴别，以保证用户在编辑状态ctrl/cmd + b/i所触发的加粗斜体与显示一致\n         * @editor Naixor\n         * @Date 2015-12-2\n         */\n            // edit for the selected node\n            function editText() {\n                var node = minder.getSelectedNode();\n                if (!node) {\n                    return;\n                }\n                var textContainer = receiverElement;\n                receiverElement.innerText = \"\";\n                if (node.getData(\"font-weight\") === \"bold\") {\n                    var b = document.createElement(\"b\");\n                    textContainer.appendChild(b);\n                    textContainer = b;\n                }\n                if (node.getData(\"font-style\") === \"italic\") {\n                    var i = document.createElement(\"i\");\n                    textContainer.appendChild(i);\n                    textContainer = i;\n                }\n                textContainer.innerText = minder.queryCommandValue(\"text\");\n                if (isGecko) {\n                    receiver.fixFFCaretDisappeared();\n                }\n                fsm.jump(\"input\", \"input-request\");\n                receiver.selectAll();\n            }\n            /**\n         * 增加对字体的鉴别，以保证用户在编辑状态ctrl/cmd + b/i所触发的加粗斜体与显示一致\n         * @editor Naixor\n         * @Date 2015-12-2\n         */\n            function enterInputMode() {\n                var node = minder.getSelectedNode();\n                if (node) {\n                    var fontSize = node.getData(\"font-size\") || node.getStyle(\"font-size\");\n                    receiverElement.style.fontSize = fontSize + \"px\";\n                    receiverElement.style.minWidth = 0;\n                    receiverElement.style.minWidth = receiverElement.clientWidth + \"px\";\n                    receiverElement.style.fontWeight = node.getData(\"font-weight\") || \"\";\n                    receiverElement.style.fontStyle = node.getData(\"font-style\") || \"\";\n                    receiverElement.classList.add(\"input\");\n                    receiverElement.focus();\n                }\n            }\n            /**\n         * 按照文本提交操作处理\n         * @Desc: 从其他节点复制文字到另一个节点时部分浏览器(chrome)会自动包裹一个span标签，这样试用一下逻辑出来的就不是text节点二是span节点因此导致undefined的情况发生\n         * @Warning: 下方代码使用[].slice.call来将HTMLDomCollection处理成为Array，ie8及以下会有问题\n         * @Editor: Naixor\n         * @Date: 2015.9.16\n         */\n            function commitInputText(textNodes) {\n                var text = \"\";\n                var TAB_CHAR = \"\\t\", ENTER_CHAR = \"\\n\", STR_CHECK = /\\S/, SPACE_CHAR = \" \", // 针对FF,SG,BD,LB,IE等浏览器下SPACE的charCode存在为32和160的情况做处理\n                SPACE_CHAR_REGEXP = new RegExp(\"( |\" + String.fromCharCode(160) + \")\"), BR = document.createElement(\"br\");\n                var isBold = false, isItalic = false;\n                for (var str, _divChildNodes, space_l, space_num, tab_num, i = 0, l = textNodes.length; i < l; i++) {\n                    str = textNodes[i];\n                    switch (Object.prototype.toString.call(str)) {\n                      // 正常情况处理\n                        case \"[object HTMLBRElement]\":\n                        {\n                            text += ENTER_CHAR;\n                            break;\n                        }\n\n                      case \"[object Text]\":\n                        {\n                            // SG下会莫名其妙的加上&nbsp;影响后续判断，干掉！\n                            /**\n                         * FF下的wholeText会导致如下问题：\n                         *     |123| -> 在一个节点中输入一段字符，此时TextNode为[#Text 123]\n                         *     提交并重新编辑，在后面追加几个字符\n                         *     |123abc| -> 此时123为一个TextNode为[#Text 123, #Text abc]，但是对这两个任意取值wholeText均为全部内容123abc\n                         * 上述BUG仅存在在FF中，故将wholeText更改为textContent\n                         */\n                            str = str.textContent.replace(\"&nbsp;\", \" \");\n                            if (!STR_CHECK.test(str)) {\n                                space_l = str.length;\n                                while (space_l--) {\n                                    if (SPACE_CHAR_REGEXP.test(str[space_l])) {\n                                        text += SPACE_CHAR;\n                                    } else if (str[space_l] === TAB_CHAR) {\n                                        text += TAB_CHAR;\n                                    }\n                                }\n                            } else {\n                                text += str;\n                            }\n                            break;\n                        }\n\n                      // ctrl + b/i 会给字体加上<b>/<i>标签来实现黑体和斜体\n                        case \"[object HTMLElement]\":\n                        {\n                            switch (str.nodeName) {\n                              case \"B\":\n                                {\n                                    isBold = true;\n                                    break;\n                                }\n\n                              case \"I\":\n                                {\n                                    isItalic = true;\n                                    break;\n                                }\n\n                              default:\n                                {}\n                            }\n                            [].splice.apply(textNodes, [ i, 1 ].concat([].slice.call(str.childNodes)));\n                            l = textNodes.length;\n                            i--;\n                            break;\n                        }\n\n                      // 被增加span标签的情况会被处理成正常情况并会推交给上面处理\n                        case \"[object HTMLSpanElement]\":\n                        {\n                            [].splice.apply(textNodes, [ i, 1 ].concat([].slice.call(str.childNodes)));\n                            l = textNodes.length;\n                            i--;\n                            break;\n                        }\n\n                      // 若标签为image标签，则判断是否为合法url，是将其加载进来\n                        case \"[object HTMLImageElement]\":\n                        {\n                            if (str.src) {\n                                if (/http(|s):\\/\\//.test(str.src)) {\n                                    minder.execCommand(\"Image\", str.src, str.alt);\n                                } else {}\n                            }\n                            break;\n                        }\n\n                      // 被增加div标签的情况会被处理成正常情况并会推交给上面处理\n                        case \"[object HTMLDivElement]\":\n                        {\n                            _divChildNodes = [];\n                            for (var di = 0, l = str.childNodes.length; di < l; di++) {\n                                _divChildNodes.push(str.childNodes[di]);\n                            }\n                            _divChildNodes.push(BR);\n                            [].splice.apply(textNodes, [ i, 1 ].concat(_divChildNodes));\n                            l = textNodes.length;\n                            i--;\n                            break;\n                        }\n\n                      default:\n                        {\n                            if (str && str.childNodes.length) {\n                                _divChildNodes = [];\n                                for (var di = 0, l = str.childNodes.length; di < l; di++) {\n                                    _divChildNodes.push(str.childNodes[di]);\n                                }\n                                _divChildNodes.push(BR);\n                                [].splice.apply(textNodes, [ i, 1 ].concat(_divChildNodes));\n                                l = textNodes.length;\n                                i--;\n                            } else {\n                                if (str && str.textContent !== undefined) {\n                                    text += str.textContent;\n                                } else {\n                                    text += \"\";\n                                }\n                            }\n                        }\n                    }\n                }\n                text = text.replace(/^\\n*|\\n*$/g, \"\");\n                text = text.replace(new RegExp(\"(\\n|\\r|\\n\\r)( |\" + String.fromCharCode(160) + \"){4}\", \"g\"), \"$1\\t\");\n                minder.getSelectedNode().setText(text);\n                if (isBold) {\n                    minder.queryCommandState(\"bold\") || minder.execCommand(\"bold\");\n                } else {\n                    minder.queryCommandState(\"bold\") && minder.execCommand(\"bold\");\n                }\n                if (isItalic) {\n                    minder.queryCommandState(\"italic\") || minder.execCommand(\"italic\");\n                } else {\n                    minder.queryCommandState(\"italic\") && minder.execCommand(\"italic\");\n                }\n                exitInputMode();\n                return text;\n            }\n            /**\n         * 判断节点的文本信息是否是\n         * @Desc: 从其他节点复制文字到另一个节点时部分浏览器(chrome)会自动包裹一个span标签，这样使用以下逻辑出来的就不是text节点二是span节点因此导致undefined的情况发生\n         * @Notice: 此处逻辑应该拆分到 kityminder-core/core/data中去，单独增加一个对某个节点importJson的事件\n         * @Editor: Naixor\n         * @Date: 2015.9.16\n         */\n            function commitInputNode(node, text) {\n                try {\n                    minder.decodeData(\"text\", text).then(function(json) {\n                        function importText(node, json, minder) {\n                            var data = json.data;\n                            node.setText(data.text || \"\");\n                            var childrenTreeData = json.children || [];\n                            for (var i = 0; i < childrenTreeData.length; i++) {\n                                var childNode = minder.createNode(null, node);\n                                importText(childNode, childrenTreeData[i], minder);\n                            }\n                            return node;\n                        }\n                        importText(node, json, minder);\n                        minder.fire(\"contentchange\");\n                        minder.getRoot().renderTree();\n                        minder.layout(300);\n                    });\n                } catch (e) {\n                    minder.fire(\"contentchange\");\n                    minder.getRoot().renderTree();\n                    // 无法被转换成脑图节点则不处理\n                    if (e.toString() !== \"Error: Invalid local format\") {\n                        throw e;\n                    }\n                }\n            }\n            function commitInputResult() {\n                /**\n             * @Desc: 进行如下处理：\n             *             根据用户的输入判断是否生成新的节点\n             *        fix #83 https://github.com/fex-team/kityminder-editor/issues/83\n             * @Editor: Naixor\n             * @Date: 2015.9.16\n             */\n                var textNodes = [].slice.call(receiverElement.childNodes);\n                /**\n             * @Desc: 增加setTimeout的原因：ie下receiverElement.innerHTML=\"\"会导致后\n             * \t\t  面commitInputText中使用textContent报错，不要问我什么原因！\n             * @Editor: Naixor\n             * @Date: 2015.12.14\n             */\n                setTimeout(function() {\n                    // 解决过大内容导致SVG窜位问题\n                    receiverElement.innerHTML = \"\";\n                }, 0);\n                var node = minder.getSelectedNode();\n                textNodes = commitInputText(textNodes);\n                commitInputNode(node, textNodes);\n                if (node.type == \"root\") {\n                    var rootText = minder.getRoot().getText();\n                    minder.fire(\"initChangeRoot\", {\n                        text: rootText\n                    });\n                }\n            }\n            function exitInputMode() {\n                receiverElement.classList.remove(\"input\");\n                receiver.selectAll();\n            }\n            function updatePosition() {\n                var planed = updatePosition;\n                var focusNode = minder.getSelectedNode();\n                if (!focusNode) return;\n                if (!planed.timer) {\n                    planed.timer = setTimeout(function() {\n                        var box = focusNode.getRenderBox(\"TextRenderer\");\n                        receiverElement.style.left = Math.round(box.x) + \"px\";\n                        receiverElement.style.top = (debug.flaged ? Math.round(box.bottom + 30) : Math.round(box.y)) + \"px\";\n                        //receiverElement.focus();\n                        planed.timer = 0;\n                    });\n                }\n            }\n        }\n        return module.exports = InputRuntime;\n    }\n};\n\n//src/runtime/jumping.js\n/**\n * @fileOverview\n *\n * 根据按键控制状态机的跳转\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[13] = {\n    value: function(require, exports, module) {\n        var Hotbox = _p.r(2);\n        // Nice: http://unixpapa.com/js/key.html\n        function isIntendToInput(e) {\n            if (e.ctrlKey || e.metaKey || e.altKey) return false;\n            // a-zA-Z\n            if (e.keyCode >= 65 && e.keyCode <= 90) return true;\n            // 0-9 以及其上面的符号\n            if (e.keyCode >= 48 && e.keyCode <= 57) return true;\n            // 小键盘区域 (除回车外)\n            if (e.keyCode != 108 && e.keyCode >= 96 && e.keyCode <= 111) return true;\n            // 小键盘区域 (除回车外)\n            // @yinheli from pull request\n            if (e.keyCode != 108 && e.keyCode >= 96 && e.keyCode <= 111) return true;\n            // 输入法\n            if (e.keyCode == 229 || e.keyCode === 0) return true;\n            return false;\n        }\n        /**\n     * @Desc: 下方使用receiver.enable()和receiver.disable()通过\n     *        修改div contenteditable属性的hack来解决开启热核后依然无法屏蔽浏览器输入的bug;\n     *        特别: win下FF对于此种情况必须要先blur在focus才能解决，但是由于这样做会导致用户\n     *             输入法状态丢失，因此对FF暂不做处理\n     * @Editor: Naixor\n     * @Date: 2015.09.14\n     */\n        function JumpingRuntime() {\n            var fsm = this.fsm;\n            var minder = this.minder;\n            var receiver = this.receiver;\n            var container = this.container;\n            var receiverElement = receiver.element;\n            var hotbox = this.hotbox;\n            var compositionLock = false;\n            // normal -> *\n            receiver.listen(\"normal\", function(e) {\n                // 为了防止处理进入edit模式而丢失处理的首字母,此时receiver必须为enable\n                receiver.enable();\n                // normal -> hotbox\n                if (e.is(\"Space\")) {\n                    e.preventDefault();\n                    // safari下Space触发hotbox,然而这时Space已在receiver上留下作案痕迹,因此抹掉\n                    if (kity.Browser.safari) {\n                        receiverElement.innerHTML = \"\";\n                    }\n                    return fsm.jump(\"hotbox\", \"space-trigger\");\n                }\n                /**\n             * check\n             * @editor Naixor\n             * @Date 2015-12-2\n             */\n                switch (e.type) {\n                  case \"keydown\":\n                    {\n                        if (minder.getSelectedNode()) {\n                            if (isIntendToInput(e)) {\n                                return fsm.jump(\"input\", \"user-input\");\n                            }\n                        } else {\n                            receiverElement.innerHTML = \"\";\n                        }\n                        // normal -> normal shortcut\n                        fsm.jump(\"normal\", \"shortcut-handle\", e);\n                        break;\n                    }\n\n                  case \"keyup\":\n                    {\n                        break;\n                    }\n\n                  default:\n                    {}\n                }\n            });\n            // hotbox -> normal\n            receiver.listen(\"hotbox\", function(e) {\n                receiver.disable();\n                e.preventDefault();\n                var handleResult = hotbox.dispatch(e);\n                if (hotbox.state() == Hotbox.STATE_IDLE && fsm.state() == \"hotbox\") {\n                    return fsm.jump(\"normal\", \"hotbox-idle\");\n                }\n            });\n            // input => normal\n            receiver.listen(\"input\", function(e) {\n                receiver.enable();\n                if (e.type == \"keydown\") {\n                    if (e.is(\"Enter\")) {\n                        e.preventDefault();\n                        return fsm.jump(\"normal\", \"input-commit\");\n                    }\n                    if (e.is(\"Esc\")) {\n                        e.preventDefault();\n                        return fsm.jump(\"normal\", \"input-cancel\");\n                    }\n                    if (e.is(\"Tab\") || e.is(\"Shift + Tab\")) {\n                        e.preventDefault();\n                    }\n                } else if (e.type == \"keyup\" && e.is(\"Esc\")) {\n                    e.preventDefault();\n                    if (!compositionLock) {\n                        return fsm.jump(\"normal\", \"input-cancel\");\n                    }\n                } else if (e.type == \"compositionstart\") {\n                    compositionLock = true;\n                } else if (e.type == \"compositionend\") {\n                    setTimeout(function() {\n                        compositionLock = false;\n                    });\n                }\n            });\n            //////////////////////////////////////////////\n            /// 右键呼出热盒\n            /// 判断的标准是：按下的位置和结束的位置一致\n            //////////////////////////////////////////////\n            var downX, downY;\n            var MOUSE_RB = 2;\n            // 右键\n            container.addEventListener(\"mousedown\", function(e) {\n                if (e.button == MOUSE_RB) {\n                    e.preventDefault();\n                }\n                if (fsm.state() == \"hotbox\") {\n                    hotbox.active(Hotbox.STATE_IDLE);\n                    fsm.jump(\"normal\", \"blur\");\n                } else if (fsm.state() == \"normal\" && e.button == MOUSE_RB) {\n                    downX = e.clientX;\n                    downY = e.clientY;\n                }\n            }, false);\n            container.addEventListener(\"mousewheel\", function(e) {\n                if (fsm.state() == \"hotbox\") {\n                    hotbox.active(Hotbox.STATE_IDLE);\n                    fsm.jump(\"normal\", \"mousemove-blur\");\n                }\n            }, false);\n            container.addEventListener(\"contextmenu\", function(e) {\n                e.preventDefault();\n            });\n            container.addEventListener(\"mouseup\", function(e) {\n                if (fsm.state() != \"normal\") {\n                    return;\n                }\n                if (e.button != MOUSE_RB || e.clientX != downX || e.clientY != downY) {\n                    return;\n                }\n                if (!minder.getSelectedNode()) {\n                    return;\n                }\n                fsm.jump(\"hotbox\", \"content-menu\");\n            }, false);\n            // 阻止热盒事件冒泡，在热盒正确执行前导致热盒关闭\n            hotbox.$element.addEventListener(\"mousedown\", function(e) {\n                e.stopPropagation();\n            });\n        }\n        return module.exports = JumpingRuntime;\n    }\n};\n\n//src/runtime/minder.js\n/**\n * @fileOverview\n *\n * 脑图示例运行时\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[14] = {\n    value: function(require, exports, module) {\n        var Minder = _p.r(4);\n        function MinderRuntime() {\n            // 不使用 kityminder 的按键处理，由 ReceiverRuntime 统一处理\n            var minder = new Minder({\n                enableKeyReceiver: false,\n                enableAnimation: true\n            });\n            // 渲染，初始化\n            minder.renderTo(this.selector);\n            minder.setTheme(null);\n            minder.select(minder.getRoot(), true);\n            minder.execCommand(\"text\", \"中心主题\");\n            // 导出给其它 Runtime 使用\n            this.minder = minder;\n        }\n        return module.exports = MinderRuntime;\n    }\n};\n\n//src/runtime/node.js\n_p[15] = {\n    value: function(require, exports, module) {\n        function NodeRuntime() {\n            var runtime = this;\n            var minder = this.minder;\n            var hotbox = this.hotbox;\n            var fsm = this.fsm;\n            var main = hotbox.state(\"main\");\n            var buttons = [ \"前移:Alt+Up:ArrangeUp\", \"下级:Tab|Insert:AppendChildNode\", \"同级:Enter:AppendSiblingNode\", \"后移:Alt+Down:ArrangeDown\", \"删除:Delete|Backspace:RemoveNode\", \"上级:Shift+Tab|Shift+Insert:AppendParentNode\" ];\n            var AppendLock = 0;\n            buttons.forEach(function(button) {\n                var parts = button.split(\":\");\n                var label = parts.shift();\n                var key = parts.shift();\n                var command = parts.shift();\n                main.button({\n                    position: \"ring\",\n                    label: label,\n                    key: key,\n                    action: function() {\n                        if (command.indexOf(\"Append\") === 0) {\n                            AppendLock++;\n                            minder.execCommand(command, \"分支主题\");\n                            // provide in input runtime\n                            function afterAppend() {\n                                if (!--AppendLock) {\n                                    runtime.editText();\n                                }\n                                minder.off(\"layoutallfinish\", afterAppend);\n                            }\n                            minder.on(\"layoutallfinish\", afterAppend);\n                        } else {\n                            minder.execCommand(command);\n                            fsm.jump(\"normal\", \"command-executed\");\n                        }\n                    },\n                    enable: function() {\n                        return minder.queryCommandState(command) != -1;\n                    }\n                });\n            });\n            main.button({\n                position: \"bottom\",\n                label: \"导入节点\",\n                key: \"Alt + V\",\n                enable: function() {\n                    var selectedNodes = minder.getSelectedNodes();\n                    return selectedNodes.length == 1;\n                },\n                action: importNodeData,\n                next: \"idle\"\n            });\n            main.button({\n                position: \"bottom\",\n                label: \"导出节点\",\n                key: \"Alt + C\",\n                enable: function() {\n                    var selectedNodes = minder.getSelectedNodes();\n                    return selectedNodes.length == 1;\n                },\n                action: exportNodeData,\n                next: \"idle\"\n            });\n            function importNodeData() {\n                minder.fire(\"importNodeData\");\n            }\n            function exportNodeData() {\n                minder.fire(\"exportNodeData\");\n            }\n        }\n        return module.exports = NodeRuntime;\n    }\n};\n\n//src/runtime/priority.js\n_p[16] = {\n    value: function(require, exports, module) {\n        function PriorityRuntime() {\n            var minder = this.minder;\n            var hotbox = this.hotbox;\n            var main = hotbox.state(\"main\");\n            main.button({\n                position: \"top\",\n                label: \"优先级\",\n                key: \"P\",\n                next: \"priority\",\n                enable: function() {\n                    return minder.queryCommandState(\"priority\") != -1;\n                }\n            });\n            var priority = hotbox.state(\"priority\");\n            \"123456789\".replace(/./g, function(p) {\n                priority.button({\n                    position: \"ring\",\n                    label: \"P\" + p,\n                    key: p,\n                    action: function() {\n                        minder.execCommand(\"Priority\", p);\n                    }\n                });\n            });\n            priority.button({\n                position: \"center\",\n                label: \"移除\",\n                key: \"Del\",\n                action: function() {\n                    minder.execCommand(\"Priority\", 0);\n                }\n            });\n            priority.button({\n                position: \"top\",\n                label: \"返回\",\n                key: \"esc\",\n                next: \"back\"\n            });\n        }\n        return module.exports = PriorityRuntime;\n    }\n};\n\n//src/runtime/progress.js\n_p[17] = {\n    value: function(require, exports, module) {\n        function ProgressRuntime() {\n            var minder = this.minder;\n            var hotbox = this.hotbox;\n            var main = hotbox.state(\"main\");\n            main.button({\n                position: \"top\",\n                label: \"进度\",\n                key: \"G\",\n                next: \"progress\",\n                enable: function() {\n                    return minder.queryCommandState(\"progress\") != -1;\n                }\n            });\n            var progress = hotbox.state(\"progress\");\n            \"012345678\".replace(/./g, function(p) {\n                progress.button({\n                    position: \"ring\",\n                    label: \"G\" + p,\n                    key: p,\n                    action: function() {\n                        minder.execCommand(\"Progress\", parseInt(p) + 1);\n                    }\n                });\n            });\n            progress.button({\n                position: \"center\",\n                label: \"移除\",\n                key: \"Del\",\n                action: function() {\n                    minder.execCommand(\"Progress\", 0);\n                }\n            });\n            progress.button({\n                position: \"top\",\n                label: \"返回\",\n                key: \"esc\",\n                next: \"back\"\n            });\n        }\n        return module.exports = ProgressRuntime;\n    }\n};\n\n//src/runtime/receiver.js\n/**\n * @fileOverview\n *\n * 键盘事件接收/分发器\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[18] = {\n    value: function(require, exports, module) {\n        var key = _p.r(23);\n        var hotbox = _p.r(2);\n        function ReceiverRuntime() {\n            var fsm = this.fsm;\n            var minder = this.minder;\n            var me = this;\n            // 接收事件的 div\n            var element = document.createElement(\"div\");\n            element.contentEditable = true;\n            /**\n         * @Desc: 增加tabindex属性使得element的contenteditable不管是trur还是false都能有focus和blur事件\n         * @Editor: Naixor\n         * @Date: 2015.09.14\n         */\n            element.setAttribute(\"tabindex\", -1);\n            element.classList.add(\"receiver\");\n            element.onkeydown = element.onkeypress = element.onkeyup = dispatchKeyEvent;\n            element.addEventListener(\"compositionstart\", dispatchKeyEvent);\n            // element.addEventListener('compositionend', dispatchKeyEvent);\n            this.container.appendChild(element);\n            // receiver 对象\n            var receiver = {\n                element: element,\n                selectAll: function() {\n                    // 保证有被选中的\n                    if (!element.innerHTML) element.innerHTML = \"&nbsp;\";\n                    var range = document.createRange();\n                    var selection = window.getSelection();\n                    range.selectNodeContents(element);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                    element.focus();\n                },\n                /**\n             * @Desc: 增加enable和disable方法用于解决热核态的输入法屏蔽问题\n             * @Editor: Naixor\n             * @Date: 2015.09.14\n             */\n                enable: function() {\n                    element.setAttribute(\"contenteditable\", true);\n                },\n                disable: function() {\n                    element.setAttribute(\"contenteditable\", false);\n                },\n                /**\n             * @Desc: hack FF下div contenteditable的光标丢失BUG\n             * @Editor: Naixor\n             * @Date: 2015.10.15\n             */\n                fixFFCaretDisappeared: function() {\n                    element.removeAttribute(\"contenteditable\");\n                    element.setAttribute(\"contenteditable\", \"true\");\n                    element.blur();\n                    element.focus();\n                },\n                /**\n             * 以此事件代替通过mouse事件来判断receiver丢失焦点的事件\n             * @editor Naixor\n             * @Date 2015-12-2\n             */\n                onblur: function(handler) {\n                    element.onblur = handler;\n                }\n            };\n            receiver.selectAll();\n            minder.on(\"beforemousedown\", receiver.selectAll);\n            minder.on(\"receiverfocus\", receiver.selectAll);\n            minder.on(\"readonly\", function() {\n                // 屏蔽minder的事件接受，删除receiver和hotbox\n                minder.disable();\n                editor.receiver.element.parentElement.removeChild(editor.receiver.element);\n                editor.hotbox.$container.removeChild(editor.hotbox.$element);\n            });\n            // 侦听器，接收到的事件会派发给所有侦听器\n            var listeners = [];\n            // 侦听指定状态下的事件，如果不传 state，侦听所有状态\n            receiver.listen = function(state, listener) {\n                if (arguments.length == 1) {\n                    listener = state;\n                    state = \"*\";\n                }\n                listener.notifyState = state;\n                listeners.push(listener);\n            };\n            function dispatchKeyEvent(e) {\n                e.is = function(keyExpression) {\n                    var subs = keyExpression.split(\"|\");\n                    for (var i = 0; i < subs.length; i++) {\n                        if (key.is(this, subs[i])) return true;\n                    }\n                    return false;\n                };\n                var listener, jumpState;\n                for (var i = 0; i < listeners.length; i++) {\n                    listener = listeners[i];\n                    // 忽略不在侦听状态的侦听器\n                    if (listener.notifyState != \"*\" && listener.notifyState != fsm.state()) {\n                        continue;\n                    }\n                    /**\n                 *\n                 * 对于所有的侦听器，只允许一种处理方式：跳转状态。\n                 * 如果侦听器确定要跳转，则返回要跳转的状态。\n                 * 每个事件只允许一个侦听器进行状态跳转\n                 * 跳转动作由侦听器自行完成（因为可能需要在跳转时传递 reason），返回跳转结果即可。\n                 * 比如：\n                 *\n                 * ```js\n                 *  receiver.listen('normal', function(e) {\n                 *      if (isSomeReasonForJumpState(e)) {\n                 *          return fsm.jump('newstate', e);\n                 *      }\n                 *  });\n                 * ```\n                 */\n                    if (listener.call(null, e)) {\n                        return;\n                    }\n                }\n            }\n            this.receiver = receiver;\n        }\n        return module.exports = ReceiverRuntime;\n    }\n};\n\n//src/tool/debug.js\n/**\n * @fileOverview\n *\n * 支持各种调试后门\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[19] = {\n    value: function(require, exports, module) {\n        var format = _p.r(20);\n        function noop() {}\n        function stringHash(str) {\n            var hash = 0;\n            for (var i = 0; i < str.length; i++) {\n                hash += str.charCodeAt(i);\n            }\n            return hash;\n        }\n        /* global console */\n        function Debug(flag) {\n            var debugMode = this.flaged = window.location.search.indexOf(flag) != -1;\n            if (debugMode) {\n                var h = stringHash(flag) % 360;\n                var flagStyle = format(\"background: hsl({0}, 50%, 80%); \" + \"color: hsl({0}, 100%, 30%); \" + \"padding: 2px 3px; \" + \"margin: 1px 3px 0 0;\" + \"border-radius: 2px;\", h);\n                var textStyle = \"background: none; color: black;\";\n                this.log = function() {\n                    var output = format.apply(null, arguments);\n                    console.log(format(\"%c{0}%c{1}\", flag, output), flagStyle, textStyle);\n                };\n            } else {\n                this.log = noop;\n            }\n        }\n        return module.exports = Debug;\n    }\n};\n\n//src/tool/format.js\n_p[20] = {\n    value: function(require, exports, module) {\n        function format(template, args) {\n            if (typeof args != \"object\") {\n                args = [].slice.call(arguments, 1);\n            }\n            return String(template).replace(/\\{(\\w+)\\}/gi, function(match, $key) {\n                return args[$key] || $key;\n            });\n        }\n        return module.exports = format;\n    }\n};\n\n//src/tool/innertext.js\n/**\n * @fileOverview\n *\n * innerText polyfill\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[21] = {\n    value: function(require, exports, module) {\n        if (!(\"innerText\" in document.createElement(\"a\")) && \"getSelection\" in window) {\n            HTMLElement.prototype.__defineGetter__(\"innerText\", function() {\n                var selection = window.getSelection(), ranges = [], str, i;\n                // Save existing selections.\n                for (i = 0; i < selection.rangeCount; i++) {\n                    ranges[i] = selection.getRangeAt(i);\n                }\n                // Deselect everything.\n                selection.removeAllRanges();\n                // Select `el` and all child nodes.\n                // 'this' is the element .innerText got called on\n                selection.selectAllChildren(this);\n                // Get the string representation of the selected nodes.\n                str = selection.toString();\n                // Deselect everything. Again.\n                selection.removeAllRanges();\n                // Restore all formerly existing selections.\n                for (i = 0; i < ranges.length; i++) {\n                    selection.addRange(ranges[i]);\n                }\n                // Oh look, this is what we wanted.\n                // String representation of the element, close to as rendered.\n                return str;\n            });\n            HTMLElement.prototype.__defineSetter__(\"innerText\", function(text) {\n                /**\n             * @Desc: 解决FireFox节点内容删除后text为null，出现报错的问题\n             * @Editor: Naixor\n             * @Date: 2015.9.16\n             */\n                this.innerHTML = (text || \"\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\\n/g, \"<br>\");\n            });\n        }\n    }\n};\n\n//src/tool/jsondiff.js\n/**\n * @fileOverview\n *\n *\n *\n * @author: techird\n * @copyright: Baidu FEX, 2014\n */\n_p[22] = {\n    value: function(require, exports, module) {\n        /*!\n    * https://github.com/Starcounter-Jack/Fast-JSON-Patch\n    * json-patch-duplex.js 0.5.0\n    * (c) 2013 Joachim Wester\n    * MIT license\n    */\n        var _objectKeys = function() {\n            if (Object.keys) return Object.keys;\n            return function(o) {\n                var keys = [];\n                for (var i in o) {\n                    if (o.hasOwnProperty(i)) {\n                        keys.push(i);\n                    }\n                }\n                return keys;\n            };\n        }();\n        function escapePathComponent(str) {\n            if (str.indexOf(\"/\") === -1 && str.indexOf(\"~\") === -1) return str;\n            return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n        }\n        function deepClone(obj) {\n            if (typeof obj === \"object\") {\n                return JSON.parse(JSON.stringify(obj));\n            } else {\n                return obj;\n            }\n        }\n        // Dirty check if obj is different from mirror, generate patches and update mirror\n        function _generate(mirror, obj, patches, path) {\n            var newKeys = _objectKeys(obj);\n            var oldKeys = _objectKeys(mirror);\n            var changed = false;\n            var deleted = false;\n            for (var t = oldKeys.length - 1; t >= 0; t--) {\n                var key = oldKeys[t];\n                var oldVal = mirror[key];\n                if (obj.hasOwnProperty(key)) {\n                    var newVal = obj[key];\n                    if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null) {\n                        _generate(oldVal, newVal, patches, path + \"/\" + escapePathComponent(key));\n                    } else {\n                        if (oldVal != newVal) {\n                            changed = true;\n                            patches.push({\n                                op: \"replace\",\n                                path: path + \"/\" + escapePathComponent(key),\n                                value: deepClone(newVal)\n                            });\n                        }\n                    }\n                } else {\n                    patches.push({\n                        op: \"remove\",\n                        path: path + \"/\" + escapePathComponent(key)\n                    });\n                    deleted = true;\n                }\n            }\n            if (!deleted && newKeys.length == oldKeys.length) {\n                return;\n            }\n            for (var t = 0; t < newKeys.length; t++) {\n                var key = newKeys[t];\n                if (!mirror.hasOwnProperty(key)) {\n                    patches.push({\n                        op: \"add\",\n                        path: path + \"/\" + escapePathComponent(key),\n                        value: deepClone(obj[key])\n                    });\n                }\n            }\n        }\n        function compare(tree1, tree2) {\n            var patches = [];\n            _generate(tree1, tree2, patches, \"\");\n            return patches;\n        }\n        return module.exports = compare;\n    }\n};\n\n//src/tool/key.js\n_p[23] = {\n    value: function(require, exports, module) {\n        var keymap = _p.r(24);\n        var CTRL_MASK = 4096;\n        var ALT_MASK = 8192;\n        var SHIFT_MASK = 16384;\n        function hash(unknown) {\n            if (typeof unknown == \"string\") {\n                return hashKeyExpression(unknown);\n            }\n            return hashKeyEvent(unknown);\n        }\n        function is(a, b) {\n            return a && b && hash(a) == hash(b);\n        }\n        exports.hash = hash;\n        exports.is = is;\n        function hashKeyEvent(keyEvent) {\n            var hashCode = 0;\n            if (keyEvent.ctrlKey || keyEvent.metaKey) {\n                hashCode |= CTRL_MASK;\n            }\n            if (keyEvent.altKey) {\n                hashCode |= ALT_MASK;\n            }\n            if (keyEvent.shiftKey) {\n                hashCode |= SHIFT_MASK;\n            }\n            // Shift, Control, Alt KeyCode ignored.\n            if ([ 16, 17, 18, 91 ].indexOf(keyEvent.keyCode) === -1) {\n                /**\n             * 解决浏览器输入法状态下对keyDown的keyCode判断不准确的问题,使用keyIdentifier,\n             * 可以解决chrome和safari下的各种问题,其他浏览器依旧有问题,然而那并不影响我们对特\n             * 需判断的按键进行判断(比如Space在safari输入法态下就是229,其他的就不是)\n             * @editor Naixor\n             * @Date 2015-12-2\n             */\n                if (keyEvent.keyCode === 229 && keyEvent.keyIdentifier) {\n                    return hashCode |= parseInt(keyEvent.keyIdentifier.substr(2), 16);\n                }\n                hashCode |= keyEvent.keyCode;\n            }\n            return hashCode;\n        }\n        function hashKeyExpression(keyExpression) {\n            var hashCode = 0;\n            keyExpression.toLowerCase().split(/\\s*\\+\\s*/).forEach(function(name) {\n                switch (name) {\n                  case \"ctrl\":\n                  case \"cmd\":\n                    hashCode |= CTRL_MASK;\n                    break;\n\n                  case \"alt\":\n                    hashCode |= ALT_MASK;\n                    break;\n\n                  case \"shift\":\n                    hashCode |= SHIFT_MASK;\n                    break;\n\n                  default:\n                    hashCode |= keymap[name];\n                }\n            });\n            return hashCode;\n        }\n    }\n};\n\n//src/tool/keymap.js\n_p[24] = {\n    value: function(require, exports, module) {\n        var keymap = {\n            Shift: 16,\n            Control: 17,\n            Alt: 18,\n            CapsLock: 20,\n            BackSpace: 8,\n            Tab: 9,\n            Enter: 13,\n            Esc: 27,\n            Space: 32,\n            PageUp: 33,\n            PageDown: 34,\n            End: 35,\n            Home: 36,\n            Insert: 45,\n            Left: 37,\n            Up: 38,\n            Right: 39,\n            Down: 40,\n            Direction: {\n                37: 1,\n                38: 1,\n                39: 1,\n                40: 1\n            },\n            Del: 46,\n            NumLock: 144,\n            Cmd: 91,\n            CmdFF: 224,\n            F1: 112,\n            F2: 113,\n            F3: 114,\n            F4: 115,\n            F5: 116,\n            F6: 117,\n            F7: 118,\n            F8: 119,\n            F9: 120,\n            F10: 121,\n            F11: 122,\n            F12: 123,\n            \"`\": 192,\n            \"=\": 187,\n            \"-\": 189,\n            \"/\": 191,\n            \".\": 190\n        };\n        // 小写适配\n        for (var key in keymap) {\n            if (keymap.hasOwnProperty(key)) {\n                keymap[key.toLowerCase()] = keymap[key];\n            }\n        }\n        var aKeyCode = 65;\n        var aCharCode = \"a\".charCodeAt(0);\n        // letters\n        \"abcdefghijklmnopqrstuvwxyz\".split(\"\").forEach(function(letter) {\n            keymap[letter] = aKeyCode + (letter.charCodeAt(0) - aCharCode);\n        });\n        // numbers\n        var n = 9;\n        do {\n            keymap[n.toString()] = n + 48;\n        } while (--n);\n        module.exports = keymap;\n    }\n};\n\nvar moduleMapping = {\n    \"expose-editor\": 1\n};\n\nfunction use(name) {\n    _p.r([ moduleMapping[name] ]);\n}\nuse('expose-editor');\n})();","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('kityMinder',{attrs:{\"importJson\":_vm.importJson},on:{\"minder\":_vm.minderHandle}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <kityMinder :importJson=\"importJson\" @minder=\"minderHandle\" />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app',\n  data() {\n    return {\n      importJson: { \n          'data': { \n            'id': 2,\n            'text': 'Design project',\n            'image': 'http://image.namedq.com/uploads/20191011/18/1570789062-WiOwJhGFDp.jpg',\n            'imageSize': { 'width': 200, 'height': 200 }\n          },\n          'children': [\n              { \n                  'data': { 'text': 'Designsy', 'priority': 1, 'id': 3 },\n                  'children': [\n                      { \n                        'data': { 'text': 'Designsy', 'id': 4 },\n                        'children': [\n                          { 'data': { 'text': 'Designsy', 'id': 5 } },\n                          { 'data': { 'text': 'Designsy', 'id': 5 } },\n                          { 'data': { 'text': 'Designsy', 'id': 5 } },\n                        ]\n                      },\n                      { 'data': { 'text': 'Designsy', 'id': 5 } },\n                      { 'data': { 'text': 'Designsy', 'id': 62 } },\n                      { 'data': { 'text': 'Designsy', 'id': 73 } },\n                      { 'data': { 'text': 'Designsy', 'id': 84 } }\n                  ]\n              },\n              { 'data': { 'text': 'Designsy', 'priority': 2, 'id': 9 } },\n              { 'data': { 'text': 'Designsy', 'priority': 3, 'id': 102 } },\n              { 'data': { 'text': 'Designsy', 'priority': 4, 'id': 113 } },\n              { 'data': { 'text': 'Designsy', 'priority': 5, 'id': 124 } }\n          ]\n      }\n    }\n  },\n  mounted() {\n  },\n  methods: {\n    minderHandle (val) {\n      console.log(val)\n    }\n  }\n}\n</script>\n\n<style>\n#minder-container {\n  height: 100vh;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=dd01b654&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"minder\"},[_c('div',{attrs:{\"id\":\"minder-container\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"minder\">\n     <div id=\"minder-container\"></div>\n  </div>\n</template>\n\n<script>\nimport 'hotbox-ui/hotbox.css'\nimport '../assets/kityminder.editor.css'\nimport 'kityminder-core/dist/kityminder.core.css'\nimport 'kity'\nimport 'hotbox-ui'\nimport 'kityminder-core'\nimport '../assets/kityminder.editor.js'\nexport default {\n  name: 'kityMinder',\n  data() {\n    return {\n      minder: {}\n    }\n  },\n  props: {\n    importJson: {\n      type: Object,\n      default: () => []\n    }\n  },\n  mounted() {\n    this.KMEditor = new window.kityminder.Editor(document.querySelector('#minder-container'))\n    this.minder = this.KMEditor.minder\n    this.minder.importJson(this.importJson)\n    this.$emit('minder', this.minder)\n    // this.minder.execCommand('Theme', 'fresh-blue')\n    // console.log(this.minder)\n  }\n}\n</script>\n\n<style>\n#minder-container {\n  height: 100vh;\n  width: 100vw;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./minder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./minder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./minder.vue?vue&type=template&id=65c57cf5&\"\nimport script from \"./minder.vue?vue&type=script&lang=js&\"\nexport * from \"./minder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./minder.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import kityMinder from './src/minder.vue'\n\nkityMinder.install = function (Vue) {\n  Vue.component(kityMinder.name, kityMinder)\n}\n\nexport default kityMinder","import Vue from 'vue'\nimport App from './App.vue'\nimport kityMinder from './../packages/kityMinder'\nVue.use(kityMinder)\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./minder.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./minder.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}